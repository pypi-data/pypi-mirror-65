

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>pyexpander for users not familiar with python version 3 &mdash; pyexpander 1.10 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script type="text/javascript" src="_static/language_data.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="expander.py and expander2.py command line options" href="expander-options.html" />
    <link rel="prev" title="EPICS support in pyexpander" href="epics-support.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> pyexpander
          

          
          </a>

          
            
            
              <div class="version">
                1.10
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="introduction.html">Introduction to pyexpander</a><ul>
<li class="toctree-l2"><a class="reference internal" href="introduction.html#macro-substitution">Macro substitution</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="reference-expander.html">pyexpander reference</a><ul>
<li class="toctree-l2"><a class="reference internal" href="reference-expander.html#a-note-on-python-versions">A note on Python versions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="reference-expander.html#short-version">Short version</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference-expander.html#background">Background</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="reference-expander.html#syntax-of-the-pyexpander-language">Syntax of the pyexpander language</a><ul>
<li class="toctree-l3"><a class="reference internal" href="reference-expander.html#the-meaning-of-the-dollar-sign">The meaning of the dollar sign</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference-expander.html#comments">Comments</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference-expander.html#commands">Commands</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference-expander.html#executing-python-statements">Executing python statements</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference-expander.html#line-continuation">Line continuation</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference-expander.html#substitutions">Substitutions</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference-expander.html#default-values-for-variables">Default values for variables</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference-expander.html#variable-scopes">Variable scopes</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference-expander.html#extending-the-pyexpander-language">Extending the pyexpander language</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference-expander.html#conditionals">Conditionals</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference-expander.html#while-loops">While loops</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference-expander.html#for-loops">For loops</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference-expander.html#macros">macros</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference-expander.html#include-files">Include files</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference-expander.html#safe-mode">Safe mode</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference-expander.html#commands-for-epics-macro-substitution">Commands for EPICS macro substitution</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="reference-expander.html#internals">Internals</a><ul>
<li class="toctree-l3"><a class="reference internal" href="reference-expander.html#pyexpander-parser">pyexpander.parser</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference-expander.html#pyexpander-lib">pyexpander.lib</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="reference-expander.html#scripts-provided-by-the-package">Scripts provided by the package</a><ul>
<li class="toctree-l3"><a class="reference internal" href="reference-expander.html#expander-py">expander.py</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference-expander.html#msi2pyexpander-py">msi2pyexpander.py</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="epics-support.html">EPICS support in pyexpander</a><ul>
<li class="toctree-l2"><a class="reference internal" href="epics-support.html#setting-the-name-of-the-template-file">Setting the name of the template file</a></li>
<li class="toctree-l2"><a class="reference internal" href="epics-support.html#the-subst-command">The “subst” command</a></li>
<li class="toctree-l2"><a class="reference internal" href="epics-support.html#the-pattern-command">The “pattern” command</a></li>
<li class="toctree-l2"><a class="reference internal" href="epics-support.html#differences-to-the-epics-msi-tool">Differences to the EPICS msi tool</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">pyexpander for users not familiar with python version 3</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#introduction">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="#comments">Comments</a></li>
<li class="toctree-l2"><a class="reference internal" href="#a-word-on-indentation">A word on indentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="#defining-variables">Defining variables</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#literals">Literals</a></li>
<li class="toctree-l3"><a class="reference internal" href="#setting-more-than-one-variable">Setting more than one variable</a></li>
<li class="toctree-l3"><a class="reference internal" href="#simple-expressions">Simple expressions</a></li>
<li class="toctree-l3"><a class="reference internal" href="#mathematical-functions">Mathematical functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="#string-expressions">String expressions</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#for-loops">For loops</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="expander-options.html">expander.py and expander2.py command line options</a><ul>
<li class="toctree-l2"><a class="reference internal" href="expander-options.html#h"><code class="docutils literal notranslate"><span class="pre">-h</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="expander-options.html#summary"><code class="docutils literal notranslate"><span class="pre">--summary</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="expander-options.html#f-file-file-file"><code class="docutils literal notranslate"><span class="pre">-f</span> <span class="pre">FILE</span> <span class="pre">--file</span> <span class="pre">FILE</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="expander-options.html#encoding"><code class="docutils literal notranslate"><span class="pre">--encoding</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="expander-options.html#output-encoding"><code class="docutils literal notranslate"><span class="pre">--output-encoding</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="expander-options.html#eval"><code class="docutils literal notranslate"><span class="pre">--eval</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="expander-options.html#i-path-include-path"><code class="docutils literal notranslate"><span class="pre">-I</span> <span class="pre">PATH</span> <span class="pre">--include</span> <span class="pre">PATH</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="expander-options.html#s-simple-vars"><code class="docutils literal notranslate"><span class="pre">-s</span> <span class="pre">--simple-vars</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="expander-options.html#a-auto-continuation"><code class="docutils literal notranslate"><span class="pre">-a</span> <span class="pre">--auto-continuation</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="expander-options.html#i-auto-indent"><code class="docutils literal notranslate"><span class="pre">-i</span> <span class="pre">--auto-indent</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="expander-options.html#no-stdin-msg"><code class="docutils literal notranslate"><span class="pre">--no-stdin-msg</span></code></a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="msi2pyexpander-options.html">msi2pyexpander.py and msi2pyexpander2.py command line options</a><ul>
<li class="toctree-l2"><a class="reference internal" href="msi2pyexpander-options.html#h"><code class="docutils literal notranslate"><span class="pre">-h</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="msi2pyexpander-options.html#summary"><code class="docutils literal notranslate"><span class="pre">--summary</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="msi2pyexpander-options.html#s-substitutionfile"><code class="docutils literal notranslate"><span class="pre">-S</span> <span class="pre">--substitutionfile</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="msi2pyexpander-options.html#o-file-outputfile-file"><code class="docutils literal notranslate"><span class="pre">-o</span> <span class="pre">FILE</span> <span class="pre">--outputfile</span> <span class="pre">FILE</span></code></a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="pyexpander-install.html">Installing pyexpander</a><ul>
<li class="toctree-l2"><a class="reference internal" href="pyexpander-install.html#parts-of-pyexpander">Parts of pyexpander</a></li>
<li class="toctree-l2"><a class="reference internal" href="pyexpander-install.html#requirements">Requirements</a></li>
<li class="toctree-l2"><a class="reference internal" href="pyexpander-install.html#install-from-pypi-with-pip">Install from pypi with pip</a></li>
<li class="toctree-l2"><a class="reference internal" href="pyexpander-install.html#install-from-a-debian-package">Install from a debian package</a></li>
<li class="toctree-l2"><a class="reference internal" href="pyexpander-install.html#install-from-a-rpm-package">Install from a rpm package</a></li>
<li class="toctree-l2"><a class="reference internal" href="pyexpander-install.html#install-from-source-tar-gz-or-zip-file">Install from source (tar.gz or zip file)</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="pyexpander-install-by-setup.html">Installing pyexpander by running setup.py</a><ul>
<li class="toctree-l2"><a class="reference internal" href="pyexpander-install-by-setup.html#install-from-source-tar-gz-or-zip-file">Install from source (tar.gz or zip file)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="pyexpander-install-by-setup.html#install-as-root-to-default-directories">Install as root to default directories</a></li>
<li class="toctree-l3"><a class="reference internal" href="pyexpander-install-by-setup.html#install-to-a-separate-directory">Install to a separate directory</a></li>
<li class="toctree-l3"><a class="reference internal" href="pyexpander-install-by-setup.html#install-in-your-home">Install in your home</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="modules.html">python2</a><ul>
<li class="toctree-l2"><a class="reference internal" href="pyexpander.html">pyexpander package</a><ul>
<li class="toctree-l3"><a class="reference internal" href="pyexpander.html#submodules">Submodules</a></li>
<li class="toctree-l3"><a class="reference internal" href="pyexpander.html#module-pyexpander.lib">pyexpander.lib module</a></li>
<li class="toctree-l3"><a class="reference internal" href="pyexpander.html#module-pyexpander.parser">pyexpander.parser module</a></li>
<li class="toctree-l3"><a class="reference internal" href="pyexpander.html#module-pyexpander">Module contents</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="license.html">pyexpander license</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">pyexpander</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>pyexpander for users not familiar with python version 3</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/python3.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="pyexpander-for-users-not-familiar-with-python-version-3">
<h1>pyexpander for users not familiar with python version 3<a class="headerlink" href="#pyexpander-for-users-not-familiar-with-python-version-3" title="Permalink to this headline">¶</a></h1>
<div class="section" id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<p>Pyexpander is based on the python programming language not just with respect to
it’s implementation. Expressions and statements are, in fact, python code. This
page shows some simple use cases for pyexpander for users that do not yet know
python. If you are interested in learning python you can find some information
at the <a class="reference external" href="http://docs.python.org">official python documentation site</a> and at
the <a class="reference external" href="http://docs.python.org/tutorial/index.html">Python tutorial</a>.</p>
</div>
<div class="section" id="comments">
<h2>Comments<a class="headerlink" href="#comments" title="Permalink to this headline">¶</a></h2>
<p>Comments in python start with a “#” character and extend to the end of the
line. If you want to have several consecutive lines as a comment, each line has
to start with a “#” character. Here are some examples:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$py(
a=1 # here is a comment
# here is a comment
# spanning several
# lines
)
</pre></div>
</div>
</div>
<div class="section" id="a-word-on-indentation">
<h2>A word on indentation<a class="headerlink" href="#a-word-on-indentation" title="Permalink to this headline">¶</a></h2>
<p>The indentation of lines (the number of spaces they start with) is part of the
syntax in python. This means that for python commands that span more than one
line, indentation matters. If you get an error message like “unexpected indent”
you know that the problem is the indentation of lines. As a rule of thumb,
python statements that follow a “$py” command should either all be in the same
line as the “$py” command and immediately follow the opening bracket or, if
there is more than one line, all should start in column one. Here are some
examples:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$py( a=1)     # indentation error due to the space between &quot;(&quot; and &quot;a&quot;
$py(a=1; b=1) # correct, spaces *within* the line are allowed
$py(a=1)      # correct
$py(
  a=1         # indentation error since &quot;a&quot; is not in column 1 of the line
)
$py(
a=1           # correct
)
$py(
a=1           # correct
b=2
)
</pre></div>
</div>
<p>Note that due to python indentation rules, the closing bracket “)” of the “$py”
command should be in column 1 if it is in a line of it’s own. Otherwise, with
certain python statements, an indentation error may occur.</p>
</div>
<div class="section" id="defining-variables">
<h2>Defining variables<a class="headerlink" href="#defining-variables" title="Permalink to this headline">¶</a></h2>
<p>Python variable names start with a letter or a “_” and may be followed by an arbitrary number of letters, digits and the “_” character.</p>
<p>You define a variable by placing a variable name, a “=” character and a value. Here are some examples:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$py(my_number= 1)
$py(my_var1= 2)
</pre></div>
</div>
<div class="section" id="literals">
<h3>Literals<a class="headerlink" href="#literals" title="Permalink to this headline">¶</a></h3>
<p>You often define variables with constant values, also called literals.
Integers, floating point numbers and strings can be written the same way as in
C. Here are some examples:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$py(my_integer=3)
$py(my_float1=1.23)
$py(my_float2=3.1E8)
$py(my_string=&quot;abc&quot;)
$py(my_line=&quot;This is a line with LF at the end.\n&quot;)
</pre></div>
</div>
</div>
<div class="section" id="setting-more-than-one-variable">
<h3>Setting more than one variable<a class="headerlink" href="#setting-more-than-one-variable" title="Permalink to this headline">¶</a></h3>
<p>Python statements are separated by a “;” character or by a newline character. You can define more than one variable like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$py(a=1; b=2; c=3)
</pre></div>
</div>
<p>or like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$py(
a=1
b=2
c=3
)
</pre></div>
</div>
</div>
<div class="section" id="simple-expressions">
<h3>Simple expressions<a class="headerlink" href="#simple-expressions" title="Permalink to this headline">¶</a></h3>
<p>Simple arithmetic expressions in python are the same as in c. Here are some examples:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$py(
a=2+4
b=1.4-3.8
c=3*4
d=a*b
e=2**4 # 2**4==16
)
</pre></div>
</div>
</div>
<div class="section" id="mathematical-functions">
<h3>Mathematical functions<a class="headerlink" href="#mathematical-functions" title="Permalink to this headline">¶</a></h3>
<p>Common mathematical functions are in the “math” package in python. You have to import this package once in order to be able to use these functions. Here is an example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$py(
from math import * # import mathematical functions
e= exp(1)  # exponential function
a= sqrt(2) # square root
)
</pre></div>
</div>
</div>
<div class="section" id="string-expressions">
<h3>String expressions<a class="headerlink" href="#string-expressions" title="Permalink to this headline">¶</a></h3>
<p>Strings can be concatenated with “+”:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$py(a=&quot;ab&quot;+&quot;cd&quot;) # now a is &quot;abcd&quot;
</pre></div>
</div>
<p>The “%” operator works according to the string formatting rules for the
“printf” command in C. It is an infix operator, a format string must be
followed by a “%” and a single value or a tuple of values. A tuple is a comma
separated list of values enclosed in round brackets. Here are some examples:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$py(
a= &quot;%02d&quot; % 3 # a==&quot;03&quot;
b= &quot;%d %3.4f&quot; % (2, 123.456789) # b= &quot;2 123.4568&quot;
)
</pre></div>
</div>
</div>
</div>
<div class="section" id="for-loops">
<h2>For loops<a class="headerlink" href="#for-loops" title="Permalink to this headline">¶</a></h2>
<p>This section describes the “$for” statement of pyexpander which is very close
to the for-statement in python.</p>
<p>For loops in python are a bit different from C. A typical loop statement
consists of a variable or a tuple of variables, the keyword “in” and an
“iterable” datatype, typically a list. If you simply want to have a loop
variable starting with a number, increase by 1 at each run, and end with
another number, you typically use the “range” function. In pure python a
for-loop running from 0 to 3 would look like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">4</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;i is now:&quot;</span><span class="p">,</span><span class="n">i</span><span class="p">)</span>
</pre></div>
</div>
<p>The “$for” statement in pyexpander is a bit different, but the specification of
the loop limit and loop variable are the same:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$for(i in range(4))
i now: $(i)
$endfor
</pre></div>
</div>
<p>Note the the number given to “range” is <em>not</em> part of the iteration. In the
example above, i never has the value 4, the last value of i is 3.</p>
<p>If “range” is provided with two numbers, the first number is the start number
and the second number is the end number plus one.  Here is an example where i
runs from 3 to 5:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$for(i in range(3,6))
i now: $(i)
$endfor
</pre></div>
</div>
<p>If “range” is provided with 3 numbers, the first ist the start, the second is
the end plus the step and the third is the step. Here is an example where i
takes the values 10, 8 and 6:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$for(i in range(10, 4, -2))
i now: $(i)
$endfor
</pre></div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="expander-options.html" class="btn btn-neutral float-right" title="expander.py and expander2.py command line options" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="epics-support.html" class="btn btn-neutral float-left" title="EPICS support in pyexpander" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2020, Helmholtz-Zentrum Berlin GmbH

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>