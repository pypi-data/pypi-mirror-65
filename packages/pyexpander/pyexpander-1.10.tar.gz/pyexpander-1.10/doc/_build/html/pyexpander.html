

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>pyexpander package &mdash; pyexpander 1.10 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script type="text/javascript" src="_static/language_data.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="pyexpander license" href="license.html" />
    <link rel="prev" title="python2" href="modules.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> pyexpander
          

          
          </a>

          
            
            
              <div class="version">
                1.10
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="introduction.html">Introduction to pyexpander</a><ul>
<li class="toctree-l2"><a class="reference internal" href="introduction.html#macro-substitution">Macro substitution</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="reference-expander.html">pyexpander reference</a><ul>
<li class="toctree-l2"><a class="reference internal" href="reference-expander.html#a-note-on-python-versions">A note on Python versions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="reference-expander.html#short-version">Short version</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference-expander.html#background">Background</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="reference-expander.html#syntax-of-the-pyexpander-language">Syntax of the pyexpander language</a><ul>
<li class="toctree-l3"><a class="reference internal" href="reference-expander.html#the-meaning-of-the-dollar-sign">The meaning of the dollar sign</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference-expander.html#comments">Comments</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference-expander.html#commands">Commands</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference-expander.html#executing-python-statements">Executing python statements</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference-expander.html#line-continuation">Line continuation</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference-expander.html#substitutions">Substitutions</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference-expander.html#default-values-for-variables">Default values for variables</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference-expander.html#variable-scopes">Variable scopes</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference-expander.html#extending-the-pyexpander-language">Extending the pyexpander language</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference-expander.html#conditionals">Conditionals</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference-expander.html#while-loops">While loops</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference-expander.html#for-loops">For loops</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference-expander.html#macros">macros</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference-expander.html#include-files">Include files</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference-expander.html#safe-mode">Safe mode</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference-expander.html#commands-for-epics-macro-substitution">Commands for EPICS macro substitution</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="reference-expander.html#internals">Internals</a><ul>
<li class="toctree-l3"><a class="reference internal" href="reference-expander.html#pyexpander-parser">pyexpander.parser</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference-expander.html#pyexpander-lib">pyexpander.lib</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="reference-expander.html#scripts-provided-by-the-package">Scripts provided by the package</a><ul>
<li class="toctree-l3"><a class="reference internal" href="reference-expander.html#expander-py">expander.py</a></li>
<li class="toctree-l3"><a class="reference internal" href="reference-expander.html#msi2pyexpander-py">msi2pyexpander.py</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="epics-support.html">EPICS support in pyexpander</a><ul>
<li class="toctree-l2"><a class="reference internal" href="epics-support.html#setting-the-name-of-the-template-file">Setting the name of the template file</a></li>
<li class="toctree-l2"><a class="reference internal" href="epics-support.html#the-subst-command">The “subst” command</a></li>
<li class="toctree-l2"><a class="reference internal" href="epics-support.html#the-pattern-command">The “pattern” command</a></li>
<li class="toctree-l2"><a class="reference internal" href="epics-support.html#differences-to-the-epics-msi-tool">Differences to the EPICS msi tool</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="python3.html">pyexpander for users not familiar with python version 3</a><ul>
<li class="toctree-l2"><a class="reference internal" href="python3.html#introduction">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="python3.html#comments">Comments</a></li>
<li class="toctree-l2"><a class="reference internal" href="python3.html#a-word-on-indentation">A word on indentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="python3.html#defining-variables">Defining variables</a><ul>
<li class="toctree-l3"><a class="reference internal" href="python3.html#literals">Literals</a></li>
<li class="toctree-l3"><a class="reference internal" href="python3.html#setting-more-than-one-variable">Setting more than one variable</a></li>
<li class="toctree-l3"><a class="reference internal" href="python3.html#simple-expressions">Simple expressions</a></li>
<li class="toctree-l3"><a class="reference internal" href="python3.html#mathematical-functions">Mathematical functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="python3.html#string-expressions">String expressions</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="python3.html#for-loops">For loops</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="expander-options.html">expander.py and expander2.py command line options</a><ul>
<li class="toctree-l2"><a class="reference internal" href="expander-options.html#h"><code class="docutils literal notranslate"><span class="pre">-h</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="expander-options.html#summary"><code class="docutils literal notranslate"><span class="pre">--summary</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="expander-options.html#f-file-file-file"><code class="docutils literal notranslate"><span class="pre">-f</span> <span class="pre">FILE</span> <span class="pre">--file</span> <span class="pre">FILE</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="expander-options.html#encoding"><code class="docutils literal notranslate"><span class="pre">--encoding</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="expander-options.html#output-encoding"><code class="docutils literal notranslate"><span class="pre">--output-encoding</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="expander-options.html#eval"><code class="docutils literal notranslate"><span class="pre">--eval</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="expander-options.html#i-path-include-path"><code class="docutils literal notranslate"><span class="pre">-I</span> <span class="pre">PATH</span> <span class="pre">--include</span> <span class="pre">PATH</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="expander-options.html#s-simple-vars"><code class="docutils literal notranslate"><span class="pre">-s</span> <span class="pre">--simple-vars</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="expander-options.html#a-auto-continuation"><code class="docutils literal notranslate"><span class="pre">-a</span> <span class="pre">--auto-continuation</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="expander-options.html#i-auto-indent"><code class="docutils literal notranslate"><span class="pre">-i</span> <span class="pre">--auto-indent</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="expander-options.html#no-stdin-msg"><code class="docutils literal notranslate"><span class="pre">--no-stdin-msg</span></code></a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="msi2pyexpander-options.html">msi2pyexpander.py and msi2pyexpander2.py command line options</a><ul>
<li class="toctree-l2"><a class="reference internal" href="msi2pyexpander-options.html#h"><code class="docutils literal notranslate"><span class="pre">-h</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="msi2pyexpander-options.html#summary"><code class="docutils literal notranslate"><span class="pre">--summary</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="msi2pyexpander-options.html#s-substitutionfile"><code class="docutils literal notranslate"><span class="pre">-S</span> <span class="pre">--substitutionfile</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="msi2pyexpander-options.html#o-file-outputfile-file"><code class="docutils literal notranslate"><span class="pre">-o</span> <span class="pre">FILE</span> <span class="pre">--outputfile</span> <span class="pre">FILE</span></code></a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="pyexpander-install.html">Installing pyexpander</a><ul>
<li class="toctree-l2"><a class="reference internal" href="pyexpander-install.html#parts-of-pyexpander">Parts of pyexpander</a></li>
<li class="toctree-l2"><a class="reference internal" href="pyexpander-install.html#requirements">Requirements</a></li>
<li class="toctree-l2"><a class="reference internal" href="pyexpander-install.html#install-from-pypi-with-pip">Install from pypi with pip</a></li>
<li class="toctree-l2"><a class="reference internal" href="pyexpander-install.html#install-from-a-debian-package">Install from a debian package</a></li>
<li class="toctree-l2"><a class="reference internal" href="pyexpander-install.html#install-from-a-rpm-package">Install from a rpm package</a></li>
<li class="toctree-l2"><a class="reference internal" href="pyexpander-install.html#install-from-source-tar-gz-or-zip-file">Install from source (tar.gz or zip file)</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="pyexpander-install-by-setup.html">Installing pyexpander by running setup.py</a><ul>
<li class="toctree-l2"><a class="reference internal" href="pyexpander-install-by-setup.html#install-from-source-tar-gz-or-zip-file">Install from source (tar.gz or zip file)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="pyexpander-install-by-setup.html#install-as-root-to-default-directories">Install as root to default directories</a></li>
<li class="toctree-l3"><a class="reference internal" href="pyexpander-install-by-setup.html#install-to-a-separate-directory">Install to a separate directory</a></li>
<li class="toctree-l3"><a class="reference internal" href="pyexpander-install-by-setup.html#install-in-your-home">Install in your home</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="modules.html">python2</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">pyexpander package</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#submodules">Submodules</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-pyexpander.lib">pyexpander.lib module</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-pyexpander.parser">pyexpander.parser module</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-pyexpander">Module contents</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="license.html">pyexpander license</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">pyexpander</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
          <li><a href="modules.html">python2</a> &raquo;</li>
        
      <li>pyexpander package</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/pyexpander.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="pyexpander-package">
<h1>pyexpander package<a class="headerlink" href="#pyexpander-package" title="Permalink to this headline">¶</a></h1>
<div class="section" id="submodules">
<h2>Submodules<a class="headerlink" href="#submodules" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="module-pyexpander.lib">
<span id="pyexpander-lib-module"></span><h2>pyexpander.lib module<a class="headerlink" href="#module-pyexpander.lib" title="Permalink to this headline">¶</a></h2>
<p>The main pyexpander library.</p>
<dl class="class">
<dt id="pyexpander.lib.BeginBlock">
<em class="property">class </em><code class="sig-prename descclassname">pyexpander.lib.</code><code class="sig-name descname">BeginBlock</code><span class="sig-paren">(</span><em class="sig-param">previous=None</em>, <em class="sig-param">filename=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyexpander/lib.html#BeginBlock"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyexpander.lib.BeginBlock" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pyexpander.lib.Block" title="pyexpander.lib.Block"><code class="xref py py-class docutils literal notranslate"><span class="pre">pyexpander.lib.Block</span></code></a></p>
<p>implements a $begin .. $end block.</p>
<p>This block is simply a variable scope, so it is derived from Block where
the constructor is called with new_scope=True.</p>
</dd></dl>

<dl class="class">
<dt id="pyexpander.lib.Block">
<em class="property">class </em><code class="sig-prename descclassname">pyexpander.lib.</code><code class="sig-name descname">Block</code><span class="sig-paren">(</span><em class="sig-param">previous=None</em>, <em class="sig-param">new_scope=False</em>, <em class="sig-param">filename=None</em>, <em class="sig-param">parse_list=None</em>, <em class="sig-param">external_definitions=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyexpander/lib.html#Block"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyexpander.lib.Block" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>class that represents a block in the expander language.</p>
<p>Each block has a parent-pointer, which may be None. Blocks are used to
represent syntactical blocks in the expander language. They manage the
global variable dictionary and some more properties that are needed during
execution of the program.</p>
<dl class="method">
<dt id="pyexpander.lib.Block.add_macro">
<code class="sig-name descname">add_macro</code><span class="sig-paren">(</span><em class="sig-param">name</em>, <em class="sig-param">macro_block</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyexpander/lib.html#Block.add_macro"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyexpander.lib.Block.add_macro" title="Permalink to this definition">¶</a></dt>
<dd><p>add a new macro block.</p>
</dd></dl>

<dl class="method">
<dt id="pyexpander.lib.Block.eval_">
<code class="sig-name descname">eval_</code><span class="sig-paren">(</span><em class="sig-param">st</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyexpander/lib.html#Block.eval_"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyexpander.lib.Block.eval_" title="Permalink to this definition">¶</a></dt>
<dd><p>perform eval with the global variable dictionary of the block.</p>
<p>Here is an example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">b</span><span class="o">=</span> <span class="n">Block</span><span class="p">(</span><span class="n">parse_list</span><span class="o">=</span><span class="p">[])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span><span class="o">.</span><span class="n">exec_</span><span class="p">(</span><span class="s2">&quot;a=2&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span><span class="o">.</span><span class="n">eval_</span><span class="p">(</span><span class="s2">&quot;3*a&quot;</span><span class="p">)</span>
<span class="go">6</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="pyexpander.lib.Block.exec_">
<code class="sig-name descname">exec_</code><span class="sig-paren">(</span><em class="sig-param">st</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyexpander/lib.html#Block.exec_"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyexpander.lib.Block.exec_" title="Permalink to this definition">¶</a></dt>
<dd><p>perform exec with the global variable dictionary of the block.</p>
<p>Here is an example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">b</span><span class="o">=</span> <span class="n">Block</span><span class="p">(</span><span class="n">parse_list</span><span class="o">=</span><span class="p">[])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span><span class="o">.</span><span class="n">exec_</span><span class="p">(</span><span class="s2">&quot;a=1&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span><span class="p">[</span><span class="s2">&quot;a&quot;</span><span class="p">]</span>
<span class="go">1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span><span class="o">=</span> <span class="n">Block</span><span class="p">(</span><span class="n">b</span><span class="p">,</span><span class="kc">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span><span class="p">[</span><span class="s2">&quot;a&quot;</span><span class="p">]</span>
<span class="go">1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span><span class="o">.</span><span class="n">exec_</span><span class="p">(</span><span class="s2">&quot;a=2&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span><span class="p">[</span><span class="s2">&quot;a&quot;</span><span class="p">]</span>
<span class="go">2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span><span class="o">.</span><span class="n">previous</span><span class="p">[</span><span class="s2">&quot;a&quot;</span><span class="p">]</span>
<span class="go">1</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="pyexpander.lib.Block.export_symbols">
<code class="sig-name descname">export_symbols</code><span class="sig-paren">(</span><em class="sig-param">lst</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyexpander/lib.html#Block.export_symbols"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyexpander.lib.Block.export_symbols" title="Permalink to this definition">¶</a></dt>
<dd><p>appends items to the export_symbols list.</p>
<p>This list is used by the pop() method in order to copy values from the
current global variable dictionary to the global variable dictionary of
the previous block.</p>
<p>Here is an example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">b</span><span class="o">=</span> <span class="n">Block</span><span class="p">(</span><span class="n">parse_list</span><span class="o">=</span><span class="p">[])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span><span class="o">.</span><span class="n">export_symbols</span><span class="p">([</span><span class="s2">&quot;a&quot;</span><span class="p">,</span><span class="s2">&quot;b&quot;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span><span class="o">.</span><span class="n">exported_syms</span>
<span class="go">[&#39;a&#39;, &#39;b&#39;]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span><span class="o">.</span><span class="n">export_symbols</span><span class="p">([</span><span class="s2">&quot;d&quot;</span><span class="p">,</span><span class="s2">&quot;e&quot;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span><span class="o">.</span><span class="n">exported_syms</span>
<span class="go">[&#39;a&#39;, &#39;b&#39;, &#39;d&#39;, &#39;e&#39;]</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="pyexpander.lib.Block.extend">
<code class="sig-name descname">extend</code><span class="sig-paren">(</span><em class="sig-param">lst</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyexpander/lib.html#Block.extend"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyexpander.lib.Block.extend" title="Permalink to this definition">¶</a></dt>
<dd><p>adds items to the list of expander functions or variables.</p>
<p>Here is an example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="o">=</span><span class="mi">1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span><span class="o">=</span><span class="mi">2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">t</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
<span class="gp">... </span>  <span class="k">return</span> <span class="n">x</span><span class="o">+</span><span class="mi">1</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">block</span><span class="o">=</span> <span class="n">Block</span><span class="p">(</span><span class="n">parse_list</span><span class="o">=</span><span class="p">[],</span><span class="n">external_definitions</span><span class="o">=</span><span class="nb">globals</span><span class="p">())</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">block</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="s2">&quot;a&quot;</span><span class="p">,</span><span class="s2">&quot;b&quot;</span><span class="p">,</span><span class="s2">&quot;t&quot;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">_pr_set</span><span class="p">(</span><span class="n">block</span><span class="o">.</span><span class="n">direct_vars</span><span class="p">)</span>
<span class="go">set([&#39;a&#39;, &#39;b&#39;])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">_pr_set</span><span class="p">(</span><span class="n">block</span><span class="o">.</span><span class="n">direct_funcs</span><span class="p">)</span>
<span class="go">set([&#39;t&#39;])</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="pyexpander.lib.Block.format_text">
<code class="sig-name descname">format_text</code><span class="sig-paren">(</span><em class="sig-param">text</em>, <em class="sig-param">indent_start</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyexpander/lib.html#Block.format_text"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyexpander.lib.Block.format_text" title="Permalink to this definition">¶</a></dt>
<dd><p>currently does indent one or more lines.</p>
</dd></dl>

<dl class="method">
<dt id="pyexpander.lib.Block.get_block_list">
<code class="sig-name descname">get_block_list</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyexpander/lib.html#Block.get_block_list"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyexpander.lib.Block.get_block_list" title="Permalink to this definition">¶</a></dt>
<dd><p>returns all blocks of the list.</p>
<p>The list is returned with the oldest block first.</p>
</dd></dl>

<dl class="method">
<dt id="pyexpander.lib.Block.get_indent">
<code class="sig-name descname">get_indent</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyexpander/lib.html#Block.get_indent"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyexpander.lib.Block.get_indent" title="Permalink to this definition">¶</a></dt>
<dd><p>gets the indent.</p>
</dd></dl>

<dl class="method">
<dt id="pyexpander.lib.Block.parse_elm">
<code class="sig-name descname">parse_elm</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyexpander/lib.html#Block.parse_elm"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyexpander.lib.Block.parse_elm" title="Permalink to this definition">¶</a></dt>
<dd><p>get the current parse element.</p>
</dd></dl>

<dl class="method">
<dt id="pyexpander.lib.Block.parse_loop">
<code class="sig-name descname">parse_loop</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyexpander/lib.html#Block.parse_loop"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyexpander.lib.Block.parse_loop" title="Permalink to this definition">¶</a></dt>
<dd><p>loop across the items in the Block.</p>
<p>returns False if there is nothing more to parse in the current block.</p>
</dd></dl>

<dl class="method">
<dt id="pyexpander.lib.Block.pop">
<code class="sig-name descname">pop</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyexpander/lib.html#Block.pop"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyexpander.lib.Block.pop" title="Permalink to this definition">¶</a></dt>
<dd><p>removes the current block and returns the previous one.</p>
<p>Here is an example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">b</span><span class="o">=</span> <span class="n">Block</span><span class="p">(</span><span class="n">parse_list</span><span class="o">=</span><span class="p">[])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span><span class="p">[</span><span class="s2">&quot;a&quot;</span><span class="p">]</span><span class="o">=</span><span class="mi">1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span><span class="p">[</span><span class="s2">&quot;b&quot;</span><span class="p">]</span><span class="o">=</span><span class="mi">2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span><span class="o">=</span> <span class="n">Block</span><span class="p">(</span><span class="n">b</span><span class="p">,</span><span class="kc">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span><span class="p">[</span><span class="s2">&quot;a&quot;</span><span class="p">]</span><span class="o">=</span><span class="mi">10</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span><span class="p">[</span><span class="s2">&quot;b&quot;</span><span class="p">]</span><span class="o">=</span><span class="mi">20</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span><span class="o">.</span><span class="n">export_symbols</span><span class="p">([</span><span class="s2">&quot;a&quot;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span><span class="o">=</span> <span class="n">b</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span><span class="p">[</span><span class="s2">&quot;a&quot;</span><span class="p">]</span>
<span class="go">10</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span><span class="p">[</span><span class="s2">&quot;b&quot;</span><span class="p">]</span>
<span class="go">2</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="pyexpander.lib.Block.posmsg">
<code class="sig-name descname">posmsg</code><span class="sig-paren">(</span><em class="sig-param">msg=None</em>, <em class="sig-param">pos=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyexpander/lib.html#Block.posmsg"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyexpander.lib.Block.posmsg" title="Permalink to this definition">¶</a></dt>
<dd><p>return a message together with a position.</p>
<p>This method is mainly used for error messages. We usually want to print
filename and the line and column number together with a message. This
method returns the given message string &lt;msg&gt; together with this
additional information.</p>
</dd></dl>

<dl class="method">
<dt id="pyexpander.lib.Block.print_block_list">
<code class="sig-name descname">print_block_list</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyexpander/lib.html#Block.print_block_list"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyexpander.lib.Block.print_block_list" title="Permalink to this definition">¶</a></dt>
<dd><p>print all blocks in the list.</p>
<p>The list is returned with the oldest block first.</p>
<p>Here is an example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">b</span><span class="o">=</span> <span class="n">Block</span><span class="p">(</span><span class="n">parse_list</span><span class="o">=</span><span class="p">[])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>
<span class="go">Block{</span>
<span class="go">    has parent          : False</span>
<span class="go">    filename            = None</span>
<span class="go">    template            = None</span>
<span class="go">    template_path       = None</span>
<span class="go">    template_encoding   = None</span>
<span class="go">    has template_parselist_cache: False</span>
<span class="go">    exported_syms       = []</span>
<span class="go">    direct_vars         = set([])</span>
<span class="go">    direct_funcs        = set([])</span>
<span class="go">    macros              : []</span>
<span class="go">    new_scope           = False</span>
<span class="go">    skip                = False</span>
<span class="go">    safe_mode           = False</span>
<span class="go">    indent              = 0</span>
<span class="go">    new_parse_list      = True</span>
<span class="go">    lst_pos             = -1</span>
<span class="go">    start_pos           = 0</span>
<span class="go">}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span><span class="o">=</span> <span class="n">Block</span><span class="p">(</span><span class="n">b</span><span class="p">,</span><span class="kc">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>
<span class="go">Block{</span>
<span class="go">    has parent          : True</span>
<span class="go">    filename            = None</span>
<span class="go">    template            = None</span>
<span class="go">    template_path       = None</span>
<span class="go">    template_encoding   = None</span>
<span class="go">    has template_parselist_cache: False</span>
<span class="go">    exported_syms       = []</span>
<span class="go">    direct_vars         = set([])</span>
<span class="go">    direct_funcs        = set([])</span>
<span class="go">    macros              : []</span>
<span class="go">    new_scope           = True</span>
<span class="go">    skip                = False</span>
<span class="go">    safe_mode           = False</span>
<span class="go">    indent              = 0</span>
<span class="go">    new_parse_list      = False</span>
<span class="go">    lst_pos             = -1</span>
<span class="go">    start_pos           = 0</span>
<span class="go">}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span><span class="o">.</span><span class="n">print_block_list</span><span class="p">()</span>
<span class="go">Block{</span>
<span class="go">    has parent          : False</span>
<span class="go">    filename            = None</span>
<span class="go">    template            = None</span>
<span class="go">    template_path       = None</span>
<span class="go">    template_encoding   = None</span>
<span class="go">    has template_parselist_cache: False</span>
<span class="go">    exported_syms       = []</span>
<span class="go">    direct_vars         = set([])</span>
<span class="go">    direct_funcs        = set([])</span>
<span class="go">    macros              : []</span>
<span class="go">    new_scope           = False</span>
<span class="go">    skip                = False</span>
<span class="go">    safe_mode           = False</span>
<span class="go">    indent              = 0</span>
<span class="go">    new_parse_list      = True</span>
<span class="go">    lst_pos             = -1</span>
<span class="go">    start_pos           = 0</span>
<span class="go">}</span>
<span class="go">Block{</span>
<span class="go">    has parent          : True</span>
<span class="go">    filename            = None</span>
<span class="go">    template            = None</span>
<span class="go">    template_path       = None</span>
<span class="go">    template_encoding   = None</span>
<span class="go">    has template_parselist_cache: False</span>
<span class="go">    exported_syms       = []</span>
<span class="go">    direct_vars         = set([])</span>
<span class="go">    direct_funcs        = set([])</span>
<span class="go">    macros              : []</span>
<span class="go">    new_scope           = True</span>
<span class="go">    skip                = False</span>
<span class="go">    safe_mode           = False</span>
<span class="go">    indent              = 0</span>
<span class="go">    new_parse_list      = False</span>
<span class="go">    lst_pos             = -1</span>
<span class="go">    start_pos           = 0</span>
<span class="go">}</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="pyexpander.lib.Block.set_indent">
<code class="sig-name descname">set_indent</code><span class="sig-paren">(</span><em class="sig-param">value</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyexpander/lib.html#Block.set_indent"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyexpander.lib.Block.set_indent" title="Permalink to this definition">¶</a></dt>
<dd><p>sets the indent.</p>
</dd></dl>

<dl class="method">
<dt id="pyexpander.lib.Block.set_safemode">
<code class="sig-name descname">set_safemode</code><span class="sig-paren">(</span><em class="sig-param">value</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyexpander/lib.html#Block.set_safemode"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyexpander.lib.Block.set_safemode" title="Permalink to this definition">¶</a></dt>
<dd><p>sets the safe_mode.</p>
</dd></dl>

<dl class="method">
<dt id="pyexpander.lib.Block.set_substfile">
<code class="sig-name descname">set_substfile</code><span class="sig-paren">(</span><em class="sig-param">filename</em>, <em class="sig-param">encoding</em>, <em class="sig-param">tp</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyexpander/lib.html#Block.set_substfile"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyexpander.lib.Block.set_substfile" title="Permalink to this definition">¶</a></dt>
<dd><p>set substitution filename.</p>
<p>Used for the “$subst”, “$template” and “$pattern” commands.</p>
</dd></dl>

<dl class="method">
<dt id="pyexpander.lib.Block.setdefault">
<code class="sig-name descname">setdefault</code><span class="sig-paren">(</span><em class="sig-param">name</em>, <em class="sig-param">val</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyexpander/lib.html#Block.setdefault"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyexpander.lib.Block.setdefault" title="Permalink to this definition">¶</a></dt>
<dd><p>return a value from globals, set to a default if it’s not defined.</p>
<p>Here are some examples:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">b</span><span class="o">=</span> <span class="n">Block</span><span class="p">(</span><span class="n">parse_list</span><span class="o">=</span><span class="p">[])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span><span class="p">[</span><span class="s2">&quot;a&quot;</span><span class="p">]</span>
<span class="gt">Traceback (most recent call last):</span>
    <span class="o">...</span>
<span class="gr">NameError</span>: <span class="n">name &#39;a&#39; is not defined at unknown position</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="s2">&quot;a&quot;</span><span class="p">,</span><span class="mi">10</span><span class="p">)</span>
<span class="go">10</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span><span class="p">[</span><span class="s2">&quot;a&quot;</span><span class="p">]</span>
<span class="go">10</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span><span class="p">[</span><span class="s2">&quot;a&quot;</span><span class="p">]</span><span class="o">=</span><span class="mi">11</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="s2">&quot;a&quot;</span><span class="p">,</span><span class="mi">10</span><span class="p">)</span>
<span class="go">11</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="pyexpander.lib.Block.str_block_list">
<code class="sig-name descname">str_block_list</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyexpander/lib.html#Block.str_block_list"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyexpander.lib.Block.str_block_list" title="Permalink to this definition">¶</a></dt>
<dd><p>returns a string representation of all blocks in the list.</p>
<p>The list is returned with the oldest block first.</p>
</dd></dl>

<dl class="method">
<dt id="pyexpander.lib.Block.str_eval">
<code class="sig-name descname">str_eval</code><span class="sig-paren">(</span><em class="sig-param">st</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyexpander/lib.html#Block.str_eval"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyexpander.lib.Block.str_eval" title="Permalink to this definition">¶</a></dt>
<dd><p>perform eval with the global variable dictionary of the block.</p>
<p>Here is an example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">b</span><span class="o">=</span> <span class="n">Block</span><span class="p">(</span><span class="n">parse_list</span><span class="o">=</span><span class="p">[])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span><span class="o">.</span><span class="n">exec_</span><span class="p">(</span><span class="s2">&quot;a=2&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span><span class="o">.</span><span class="n">str_eval</span><span class="p">(</span><span class="s2">&quot;3*a&quot;</span><span class="p">)</span>
<span class="go">&#39;6&#39;</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="pyexpander.lib.Block.substfile_parselist">
<code class="sig-name descname">substfile_parselist</code><span class="sig-paren">(</span><em class="sig-param">include_paths</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyexpander/lib.html#Block.substfile_parselist"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyexpander.lib.Block.substfile_parselist" title="Permalink to this definition">¶</a></dt>
<dd><p>return the parselist for a given file.</p>
<p>This method manages a cache of that assigns filenames to parselists.
This can speed things up if a file is included several times.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="pyexpander.lib.ForBlock">
<em class="property">class </em><code class="sig-prename descclassname">pyexpander.lib.</code><code class="sig-name descname">ForBlock</code><span class="sig-paren">(</span><em class="sig-param">previous=None</em>, <em class="sig-param">new_scope=False</em>, <em class="sig-param">value_list=None</em>, <em class="sig-param">var_expr=''</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyexpander/lib.html#ForBlock"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyexpander.lib.ForBlock" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pyexpander.lib.Block" title="pyexpander.lib.Block"><code class="xref py py-class docutils literal notranslate"><span class="pre">pyexpander.lib.Block</span></code></a></p>
<p>implements a $for .. $endfor block.</p>
<dl class="method">
<dt id="pyexpander.lib.ForBlock.next_loop">
<code class="sig-name descname">next_loop</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyexpander/lib.html#ForBlock.next_loop"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyexpander.lib.ForBlock.next_loop" title="Permalink to this definition">¶</a></dt>
<dd><p>performs next loop.</p>
<dl class="simple">
<dt>returns:</dt><dd><p>True when the loop is not yet finished.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="pyexpander.lib.ForBlock.set_loop_var">
<code class="sig-name descname">set_loop_var</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyexpander/lib.html#ForBlock.set_loop_var"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyexpander.lib.ForBlock.set_loop_var" title="Permalink to this definition">¶</a></dt>
<dd><p>set the loop variable to a new value.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="pyexpander.lib.IfBlock">
<em class="property">class </em><code class="sig-prename descclassname">pyexpander.lib.</code><code class="sig-name descname">IfBlock</code><span class="sig-paren">(</span><em class="sig-param">previous=None</em>, <em class="sig-param">condition=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyexpander/lib.html#IfBlock"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyexpander.lib.IfBlock" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pyexpander.lib.Block" title="pyexpander.lib.Block"><code class="xref py py-class docutils literal notranslate"><span class="pre">pyexpander.lib.Block</span></code></a></p>
<p>implements a $if .. $else .. $endif block.</p>
<p>An $if block never has a variable scope, so the base Block object is
called with new_scope=False.</p>
<dl class="method">
<dt id="pyexpander.lib.IfBlock.enter_elif">
<code class="sig-name descname">enter_elif</code><span class="sig-paren">(</span><em class="sig-param">condition</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyexpander/lib.html#IfBlock.enter_elif"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyexpander.lib.IfBlock.enter_elif" title="Permalink to this definition">¶</a></dt>
<dd><p>enter the “elif” part in the if..endif block.</p>
</dd></dl>

<dl class="method">
<dt id="pyexpander.lib.IfBlock.enter_else">
<code class="sig-name descname">enter_else</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyexpander/lib.html#IfBlock.enter_else"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyexpander.lib.IfBlock.enter_else" title="Permalink to this definition">¶</a></dt>
<dd><p>this should be called when $else is encountered.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="pyexpander.lib.IncludeBlock">
<em class="property">class </em><code class="sig-prename descclassname">pyexpander.lib.</code><code class="sig-name descname">IncludeBlock</code><span class="sig-paren">(</span><em class="sig-param">previous=None</em>, <em class="sig-param">new_scope=False</em>, <em class="sig-param">filename=None</em>, <em class="sig-param">encoding='UTF-8'</em>, <em class="sig-param">include_paths=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyexpander/lib.html#IncludeBlock"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyexpander.lib.IncludeBlock" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pyexpander.lib.Block" title="pyexpander.lib.Block"><code class="xref py py-class docutils literal notranslate"><span class="pre">pyexpander.lib.Block</span></code></a></p>
<p>implements a $include(filename) block.</p>
<p>This block is simply a variable scope, so it is derived from Block where
the constructor is called with new_scope=True.</p>
</dd></dl>

<dl class="class">
<dt id="pyexpander.lib.MacBlock">
<em class="property">class </em><code class="sig-prename descclassname">pyexpander.lib.</code><code class="sig-name descname">MacBlock</code><span class="sig-paren">(</span><em class="sig-param">previous=None</em>, <em class="sig-param">declaration_block=None</em>, <em class="sig-param">parameter_list=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyexpander/lib.html#MacBlock"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyexpander.lib.MacBlock" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pyexpander.lib.Block" title="pyexpander.lib.Block"><code class="xref py py-class docutils literal notranslate"><span class="pre">pyexpander.lib.Block</span></code></a></p>
<p>implements a $macro…$endmacro block.</p>
<dl class="method">
<dt id="pyexpander.lib.MacBlock.pop">
<code class="sig-name descname">pop</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyexpander/lib.html#MacBlock.pop"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyexpander.lib.MacBlock.pop" title="Permalink to this definition">¶</a></dt>
<dd><p>override pop() from base class.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="pyexpander.lib.PatternBlock">
<em class="property">class </em><code class="sig-prename descclassname">pyexpander.lib.</code><code class="sig-name descname">PatternBlock</code><span class="sig-paren">(</span><em class="sig-param">previous=None</em>, <em class="sig-param">filename=None</em>, <em class="sig-param">include_paths=None</em>, <em class="sig-param">heading=None</em>, <em class="sig-param">lines=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyexpander/lib.html#PatternBlock"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyexpander.lib.PatternBlock" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pyexpander.lib.Block" title="pyexpander.lib.Block"><code class="xref py py-class docutils literal notranslate"><span class="pre">pyexpander.lib.Block</span></code></a></p>
<p>implements a $pattern(parameters) block.</p>
<p>This block is simply a variable scope, so it is derived from Block where
the constructor is called with new_scope=True.</p>
<dl class="method">
<dt id="pyexpander.lib.PatternBlock.def_vars">
<code class="sig-name descname">def_vars</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyexpander/lib.html#PatternBlock.def_vars"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyexpander.lib.PatternBlock.def_vars" title="Permalink to this definition">¶</a></dt>
<dd><p>define all the given variables in the PatternBlock.</p>
</dd></dl>

<dl class="method">
<dt id="pyexpander.lib.PatternBlock.pop">
<code class="sig-name descname">pop</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyexpander/lib.html#PatternBlock.pop"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyexpander.lib.PatternBlock.pop" title="Permalink to this definition">¶</a></dt>
<dd><p>removes the current block and returns the previous one.</p>
<p>Here is an example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">b</span><span class="o">=</span> <span class="n">Block</span><span class="p">(</span><span class="n">parse_list</span><span class="o">=</span><span class="p">[])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span><span class="p">[</span><span class="s2">&quot;a&quot;</span><span class="p">]</span><span class="o">=</span><span class="mi">1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span><span class="p">[</span><span class="s2">&quot;b&quot;</span><span class="p">]</span><span class="o">=</span><span class="mi">2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span><span class="o">=</span> <span class="n">Block</span><span class="p">(</span><span class="n">b</span><span class="p">,</span><span class="kc">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span><span class="p">[</span><span class="s2">&quot;a&quot;</span><span class="p">]</span><span class="o">=</span><span class="mi">10</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span><span class="p">[</span><span class="s2">&quot;b&quot;</span><span class="p">]</span><span class="o">=</span><span class="mi">20</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span><span class="o">.</span><span class="n">export_symbols</span><span class="p">([</span><span class="s2">&quot;a&quot;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span><span class="o">=</span> <span class="n">b</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span><span class="p">[</span><span class="s2">&quot;a&quot;</span><span class="p">]</span>
<span class="go">10</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span><span class="p">[</span><span class="s2">&quot;b&quot;</span><span class="p">]</span>
<span class="go">2</span>
</pre></div>
</div>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="pyexpander.lib.ResultText">
<em class="property">class </em><code class="sig-prename descclassname">pyexpander.lib.</code><code class="sig-name descname">ResultText</code><a class="reference internal" href="_modules/pyexpander/lib.html#ResultText"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyexpander.lib.ResultText" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>basically a list of strings with a current column property.</p>
<dl class="method">
<dt id="pyexpander.lib.ResultText.append">
<code class="sig-name descname">append</code><span class="sig-paren">(</span><em class="sig-param">text</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyexpander/lib.html#ResultText.append"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyexpander.lib.ResultText.append" title="Permalink to this definition">¶</a></dt>
<dd><p>append some text.</p>
</dd></dl>

<dl class="method">
<dt id="pyexpander.lib.ResultText.column">
<code class="sig-name descname">column</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyexpander/lib.html#ResultText.column"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyexpander.lib.ResultText.column" title="Permalink to this definition">¶</a></dt>
<dd><p>return current column.</p>
</dd></dl>

<dl class="method">
<dt id="pyexpander.lib.ResultText.current_column">
<em class="property">static </em><code class="sig-name descname">current_column</code><span class="sig-paren">(</span><em class="sig-param">st</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyexpander/lib.html#ResultText.current_column"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyexpander.lib.ResultText.current_column" title="Permalink to this definition">¶</a></dt>
<dd><p>find current column if the string is printed.</p>
<p>Note: With a string ending with ‘n’ this returns 1.</p>
<p>Here are some examples: &gt;&gt;&gt; current_column(“”)
-1
&gt;&gt;&gt; ResultText.current_column(“ab”)
-1
&gt;&gt;&gt; ResultText.current_column(“nab”)
3
&gt;&gt;&gt; ResultText.current_column(“nabn”)
1
&gt;&gt;&gt; ResultText.current_column(“nabna”)
2</p>
</dd></dl>

<dl class="method">
<dt id="pyexpander.lib.ResultText.list_">
<code class="sig-name descname">list_</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyexpander/lib.html#ResultText.list_"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyexpander.lib.ResultText.list_" title="Permalink to this definition">¶</a></dt>
<dd><p>return internal list.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="pyexpander.lib.SubstBlock">
<em class="property">class </em><code class="sig-prename descclassname">pyexpander.lib.</code><code class="sig-name descname">SubstBlock</code><span class="sig-paren">(</span><em class="sig-param">previous=None</em>, <em class="sig-param">filename=None</em>, <em class="sig-param">include_paths=None</em>, <em class="sig-param">external_definitions=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyexpander/lib.html#SubstBlock"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyexpander.lib.SubstBlock" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pyexpander.lib.Block" title="pyexpander.lib.Block"><code class="xref py py-class docutils literal notranslate"><span class="pre">pyexpander.lib.Block</span></code></a></p>
<p>implements a $subst(parameters) block.</p>
<p>This block is simply a variable scope, so it is derived from Block where
the constructor is called with new_scope=True.</p>
</dd></dl>

<dl class="class">
<dt id="pyexpander.lib.WhileBlock">
<em class="property">class </em><code class="sig-prename descclassname">pyexpander.lib.</code><code class="sig-name descname">WhileBlock</code><span class="sig-paren">(</span><em class="sig-param">previous=None</em>, <em class="sig-param">new_scope=False</em>, <em class="sig-param">while_expr=''</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyexpander/lib.html#WhileBlock"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyexpander.lib.WhileBlock" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pyexpander.lib.Block" title="pyexpander.lib.Block"><code class="xref py py-class docutils literal notranslate"><span class="pre">pyexpander.lib.Block</span></code></a></p>
<p>implements a $while .. $endwhile block.</p>
<dl class="method">
<dt id="pyexpander.lib.WhileBlock.next_loop">
<code class="sig-name descname">next_loop</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyexpander/lib.html#WhileBlock.next_loop"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyexpander.lib.WhileBlock.next_loop" title="Permalink to this definition">¶</a></dt>
<dd><p>performs next loop.</p>
<dl class="simple">
<dt>returns:</dt><dd><p>True when the loop is not yet finished.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="pyexpander.lib.expand">
<code class="sig-prename descclassname">pyexpander.lib.</code><code class="sig-name descname">expand</code><span class="sig-paren">(</span><em class="sig-param">st</em>, <em class="sig-param">filename=None</em>, <em class="sig-param">external_definitions=None</em>, <em class="sig-param">allow_nobracket_vars=False</em>, <em class="sig-param">auto_continuation=False</em>, <em class="sig-param">auto_indent=False</em>, <em class="sig-param">include_paths=None</em>, <em class="sig-param">output_encoding='UTF-8'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyexpander/lib.html#expand"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyexpander.lib.expand" title="Permalink to this definition">¶</a></dt>
<dd><p>Get a string, expand the text in it and print it.</p>
<dl class="simple">
<dt>args:</dt><dd><ul class="simple">
<li><p>st (str): The string that is to be expaned.</p></li>
<li><dl class="simple">
<dt>filename (str): The filename, if given, is included in possible error</dt><dd><p>messages.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>external_definitions (dict): A dict with items to import to the</dt><dd><p>globals() dictionary.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>allow_nobracket_vars (bool): If True, allow variables in the form $VAR</dt><dd><p>instead of $(VAR).</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>auto_continuation (bool): If True, remove newline at the end of lines</dt><dd><p>with a command. This works like having an ‘’ at the end of each
line with a command.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>auto_indent (bool): If True, indent the contents of macros to the same</dt><dd><p>level as the macro invocation.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>include_paths (list): A list of paths that are searched for the</dt><dd><p>$include command.</p>
</dd>
</dl>
</li>
<li><p>output_encoding: encoding used to create output data</p></li>
</ul>
</dd>
<dt>returns:</dt><dd><ul class="simple">
<li><p>The internal globals() dictionary.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="pyexpander.lib.expandFile">
<code class="sig-prename descclassname">pyexpander.lib.</code><code class="sig-name descname">expandFile</code><span class="sig-paren">(</span><em class="sig-param">filename</em>, <em class="sig-param">encoding='UTF-8'</em>, <em class="sig-param">external_definitions=None</em>, <em class="sig-param">allow_nobracket_vars=False</em>, <em class="sig-param">auto_continuation=False</em>, <em class="sig-param">auto_indent=False</em>, <em class="sig-param">include_paths=None</em>, <em class="sig-param">no_stdin_warning=False</em>, <em class="sig-param">output_encoding='UTF-8'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyexpander/lib.html#expandFile"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyexpander.lib.expandFile" title="Permalink to this definition">¶</a></dt>
<dd><p>Get a filename, expand the text in it and print it.</p>
<dl class="simple">
<dt>args:</dt><dd><ul class="simple">
<li><p>filename (str): The name of the file</p></li>
<li><p>encoding: encoding of the file</p></li>
<li><dl class="simple">
<dt>external_definitions (dict): A dict with items to import to the</dt><dd><p>globals() dictionary.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>allow_nobracket_vars (bool): If True, allow variables in the form $VAR</dt><dd><p>instead of $(VAR).</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>auto_continuation (bool): If True, remove newline at the end of</dt><dd><p>lines with a command. This works like having an ‘’ at the end of
each line with a command.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>auto_indent (bool): If True, indent the contents of macros to</dt><dd><p>the same level as the macro invocation.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>include_paths (list): A list of paths that are searched for the</dt><dd><p>$include command.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>no_stdin_warning (bool): If True, print short message on stderr</dt><dd><p>when the program is waiting on input from stdin.</p>
</dd>
</dl>
</li>
<li><p>output_encoding: encoding used to create output data</p></li>
</ul>
</dd>
<dt>returns:</dt><dd><ul class="simple">
<li><p>The internal globals() dictionary.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="pyexpander.lib.expandToStr">
<code class="sig-prename descclassname">pyexpander.lib.</code><code class="sig-name descname">expandToStr</code><span class="sig-paren">(</span><em class="sig-param">st</em>, <em class="sig-param">filename=None</em>, <em class="sig-param">external_definitions=None</em>, <em class="sig-param">allow_nobracket_vars=False</em>, <em class="sig-param">auto_continuation=False</em>, <em class="sig-param">auto_indent=False</em>, <em class="sig-param">include_paths=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyexpander/lib.html#expandToStr"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyexpander.lib.expandToStr" title="Permalink to this definition">¶</a></dt>
<dd><p>Get a string, expand the text in it and return it as a string.</p>
<dl>
<dt>args:</dt><dd><p>st (str): The string that is to be expaned.</p>
<dl class="simple">
<dt>filename (str): The filename, if given, is included in possible error</dt><dd><p>messages.</p>
</dd>
<dt>external_definitions (dict): A dict with items to import to the</dt><dd><p>globals() dictionary.</p>
</dd>
<dt>allow_nobracket_vars (bool): If True, allow variables in the form $VAR</dt><dd><p>instead of $(VAR).</p>
</dd>
<dt>auto_continuation (bool): If True, remove newline at the end of lines</dt><dd><p>with a command. This works like having an ‘’ at the end of each
line with a command.</p>
</dd>
<dt>auto_indent (bool): If True, indent the contents of macros to the same</dt><dd><p>level as the macro invocation.</p>
</dd>
<dt>include_paths (list): A list of paths that are searched for the</dt><dd><p>$include command.</p>
</dd>
</dl>
</dd>
<dt>returns a tuple containing:</dt><dd><ul class="simple">
<li><p>The expanded text as a single string.</p></li>
<li><p>The internal globals() dictionary.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="pyexpander.lib.find_file">
<code class="sig-prename descclassname">pyexpander.lib.</code><code class="sig-name descname">find_file</code><span class="sig-paren">(</span><em class="sig-param">filename</em>, <em class="sig-param">include_paths</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyexpander/lib.html#find_file"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyexpander.lib.find_file" title="Permalink to this definition">¶</a></dt>
<dd><p>find a file in a list of include paths.</p>
<p>include_paths MUST CONTAIN “” in order to search the
local directory.</p>
</dd></dl>

<dl class="function">
<dt id="pyexpander.lib.keyword_check">
<code class="sig-prename descclassname">pyexpander.lib.</code><code class="sig-name descname">keyword_check</code><span class="sig-paren">(</span><em class="sig-param">identifiers</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyexpander/lib.html#keyword_check"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyexpander.lib.keyword_check" title="Permalink to this definition">¶</a></dt>
<dd><p>indentifiers must not be identical to keywords.</p>
<p>This function may raise an exception.</p>
</dd></dl>

<dl class="function">
<dt id="pyexpander.lib.one_or_two_strings">
<code class="sig-prename descclassname">pyexpander.lib.</code><code class="sig-name descname">one_or_two_strings</code><span class="sig-paren">(</span><em class="sig-param">arg</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyexpander/lib.html#one_or_two_strings"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyexpander.lib.one_or_two_strings" title="Permalink to this definition">¶</a></dt>
<dd><p>arg must be a single string or a tuple of two strings.</p>
</dd></dl>

<dl class="function">
<dt id="pyexpander.lib.parseFile">
<code class="sig-prename descclassname">pyexpander.lib.</code><code class="sig-name descname">parseFile</code><span class="sig-paren">(</span><em class="sig-param">filename</em>, <em class="sig-param">encoding</em>, <em class="sig-param">no_stdin_warning</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyexpander/lib.html#parseFile"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyexpander.lib.parseFile" title="Permalink to this definition">¶</a></dt>
<dd><p>parse a file.</p>
</dd></dl>

<dl class="function">
<dt id="pyexpander.lib.parseString">
<code class="sig-prename descclassname">pyexpander.lib.</code><code class="sig-name descname">parseString</code><span class="sig-paren">(</span><em class="sig-param">st</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyexpander/lib.html#parseString"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyexpander.lib.parseString" title="Permalink to this definition">¶</a></dt>
<dd><p>parse a string.</p>
</dd></dl>

<dl class="function">
<dt id="pyexpander.lib.processToList">
<code class="sig-prename descclassname">pyexpander.lib.</code><code class="sig-name descname">processToList</code><span class="sig-paren">(</span><em class="sig-param">parse_list</em>, <em class="sig-param">filename=None</em>, <em class="sig-param">external_definitions=None</em>, <em class="sig-param">allow_nobracket_vars=False</em>, <em class="sig-param">auto_continuation=False</em>, <em class="sig-param">auto_indent=False</em>, <em class="sig-param">include_paths=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyexpander/lib.html#processToList"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyexpander.lib.processToList" title="Permalink to this definition">¶</a></dt>
<dd><p>Expand a parse list to a list of strings.</p>
<dl>
<dt>args:</dt><dd><p>parse_list: A parse list created by parseString().</p>
<dl class="simple">
<dt>filename (str): The filename, if given, is included in possible error</dt><dd><p>messages.</p>
</dd>
<dt>external_definitions (dict): A dict with items to import to the</dt><dd><p>globals() dictionary.</p>
</dd>
<dt>allow_nobracket_vars (bool): If True, allow variables in the form $VAR</dt><dd><p>instead of $(VAR).</p>
</dd>
<dt>auto_continuation (bool): If True, remove newline at the end of lines</dt><dd><p>with a command. This works like having an ‘’ at the end of each
line with a command.</p>
</dd>
<dt>auto_indent (bool): If True, indent the contents of macros to the same</dt><dd><p>level as the macro invocation.</p>
</dd>
<dt>include_paths (list): A list of paths that are searched for the</dt><dd><p>$include command.</p>
</dd>
</dl>
</dd>
<dt>returns a tuple containing:</dt><dd><ul class="simple">
<li><p>The expanded text as a list of strings</p></li>
<li><p>The internal globals() dictionary.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="pyexpander.lib.processToPrint">
<code class="sig-prename descclassname">pyexpander.lib.</code><code class="sig-name descname">processToPrint</code><span class="sig-paren">(</span><em class="sig-param">parse_list</em>, <em class="sig-param">filename=None</em>, <em class="sig-param">external_definitions=None</em>, <em class="sig-param">allow_nobracket_vars=False</em>, <em class="sig-param">auto_continuation=False</em>, <em class="sig-param">auto_indent=False</em>, <em class="sig-param">include_paths=None</em>, <em class="sig-param">output_encoding='UTF-8'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyexpander/lib.html#processToPrint"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyexpander.lib.processToPrint" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets a parse list, expand the text in it and print it.</p>
<dl class="simple">
<dt>args:</dt><dd><ul class="simple">
<li><p>parse_list: A parse list created by parseString().</p></li>
<li><dl class="simple">
<dt>filename (str): The filename, if given, is included in possible error</dt><dd><p>messages.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>external_definitions (dict): A dict with items to import to the</dt><dd><p>globals() dictionary.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>allow_nobracket_vars (bool): If True, allow variables in the form $VAR</dt><dd><p>instead of $(VAR).</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>auto_continuation (bool): If True, remove newline at the end of lines</dt><dd><p>with a command. This works like having an ‘’ at the end of each
line with a command.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>auto_indent (bool): If True, indent the contents of macros to the same</dt><dd><p>level as the macro invocation.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>include_paths (list): A list of paths that are searched for the</dt><dd><p>$include command.</p>
</dd>
</dl>
</li>
<li><p>output_encoding: encoding used to create output data</p></li>
</ul>
</dd>
<dt>returns:</dt><dd><ul class="simple">
<li><p>The internal globals() dictionary.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="pyexpander.lib.test_encoding">
<code class="sig-prename descclassname">pyexpander.lib.</code><code class="sig-name descname">test_encoding</code><span class="sig-paren">(</span><em class="sig-param">encoding</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyexpander/lib.html#test_encoding"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyexpander.lib.test_encoding" title="Permalink to this definition">¶</a></dt>
<dd><p>test if an encoding is known.</p>
<p>raises (by encode() method) a LookupError exception in case of an error.</p>
</dd></dl>

</div>
<div class="section" id="module-pyexpander.parser">
<span id="pyexpander-parser-module"></span><h2>pyexpander.parser module<a class="headerlink" href="#module-pyexpander.parser" title="Permalink to this headline">¶</a></h2>
<p>implement the parser for pyexpander.</p>
<dl class="class">
<dt id="pyexpander.parser.IndexedString">
<em class="property">class </em><code class="sig-prename descclassname">pyexpander.parser.</code><code class="sig-name descname">IndexedString</code><span class="sig-paren">(</span><em class="sig-param">st</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyexpander/parser.html#IndexedString"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyexpander.parser.IndexedString" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>a string together with row column information.</p>
<p>Here is an example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">txt</span><span class="o">=</span><span class="s1">&#39;&#39;&#39;01234</span>
<span class="gp">... </span><span class="s1">67</span>
<span class="gp">... </span><span class="s1">9abcd&#39;&#39;&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">l</span><span class="o">=</span><span class="n">IndexedString</span><span class="p">(</span><span class="n">txt</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">l</span><span class="o">.</span><span class="n">rowcol</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="go">(1, 1)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">l</span><span class="o">.</span><span class="n">rowcol</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="go">(1, 2)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">l</span><span class="o">.</span><span class="n">rowcol</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
<span class="go">(1, 5)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">l</span><span class="o">.</span><span class="n">rowcol</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
<span class="go">(1, 6)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">l</span><span class="o">.</span><span class="n">rowcol</span><span class="p">(</span><span class="mi">6</span><span class="p">)</span>
<span class="go">(2, 1)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">l</span><span class="o">.</span><span class="n">rowcol</span><span class="p">(</span><span class="mi">7</span><span class="p">)</span>
<span class="go">(2, 2)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">l</span><span class="o">.</span><span class="n">rowcol</span><span class="p">(</span><span class="mi">8</span><span class="p">)</span>
<span class="go">(2, 3)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">l</span><span class="o">.</span><span class="n">rowcol</span><span class="p">(</span><span class="mi">9</span><span class="p">)</span>
<span class="go">(3, 1)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">l</span><span class="o">.</span><span class="n">rowcol</span><span class="p">(</span><span class="mi">13</span><span class="p">)</span>
<span class="go">(3, 5)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">l</span><span class="o">.</span><span class="n">rowcol</span><span class="p">(</span><span class="mi">14</span><span class="p">)</span>
<span class="go">(3, 6)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">l</span><span class="o">.</span><span class="n">rowcol</span><span class="p">(</span><span class="mi">16</span><span class="p">)</span>
<span class="go">(3, 8)</span>
</pre></div>
</div>
<dl class="method">
<dt id="pyexpander.parser.IndexedString.rowcol">
<code class="sig-name descname">rowcol</code><span class="sig-paren">(</span><em class="sig-param">pos</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyexpander/parser.html#IndexedString.rowcol"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyexpander.parser.IndexedString.rowcol" title="Permalink to this definition">¶</a></dt>
<dd><p>calculate (row,column) from a string position.</p>
</dd></dl>

<dl class="method">
<dt id="pyexpander.parser.IndexedString.st">
<code class="sig-name descname">st</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyexpander/parser.html#IndexedString.st"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyexpander.parser.IndexedString.st" title="Permalink to this definition">¶</a></dt>
<dd><p>return the raw string.</p>
</dd></dl>

</dd></dl>

<dl class="exception">
<dt id="pyexpander.parser.ParseException">
<em class="property">exception </em><code class="sig-prename descclassname">pyexpander.parser.</code><code class="sig-name descname">ParseException</code><span class="sig-paren">(</span><em class="sig-param">value</em>, <em class="sig-param">pos=None</em>, <em class="sig-param">rowcol=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyexpander/parser.html#ParseException"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyexpander.parser.ParseException" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">Exception</span></code></p>
<p>used for Exceptions in this module.</p>
</dd></dl>

<dl class="class">
<dt id="pyexpander.parser.ParsedCommand">
<em class="property">class </em><code class="sig-prename descclassname">pyexpander.parser.</code><code class="sig-name descname">ParsedCommand</code><span class="sig-paren">(</span><em class="sig-param">idxst</em>, <em class="sig-param">start</em>, <em class="sig-param">end</em>, <em class="sig-param">ident</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyexpander/parser.html#ParsedCommand"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyexpander.parser.ParsedCommand" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pyexpander.parser.ParsedItem" title="pyexpander.parser.ParsedItem"><code class="xref py py-class docutils literal notranslate"><span class="pre">pyexpander.parser.ParsedItem</span></code></a></p>
<p>class of a pyexpander command with arguments.</p>
<p>A command has the form “$name(argument1, argument2, …)”.</p>
<dl class="method">
<dt id="pyexpander.parser.ParsedCommand.args">
<code class="sig-name descname">args</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyexpander/parser.html#ParsedCommand.args"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyexpander.parser.ParsedCommand.args" title="Permalink to this definition">¶</a></dt>
<dd><p>return the arguments of the command.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="pyexpander.parser.ParsedComment">
<em class="property">class </em><code class="sig-prename descclassname">pyexpander.parser.</code><code class="sig-name descname">ParsedComment</code><span class="sig-paren">(</span><em class="sig-param">idxst</em>, <em class="sig-param">start</em>, <em class="sig-param">end</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyexpander/parser.html#ParsedComment"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyexpander.parser.ParsedComment" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pyexpander.parser.ParsedItem" title="pyexpander.parser.ParsedItem"><code class="xref py py-class docutils literal notranslate"><span class="pre">pyexpander.parser.ParsedItem</span></code></a></p>
<p>class of a parsed comment.</p>
<p>A comment in pyexpander starts with ‘$#’.</p>
</dd></dl>

<dl class="class">
<dt id="pyexpander.parser.ParsedEval">
<em class="property">class </em><code class="sig-prename descclassname">pyexpander.parser.</code><code class="sig-name descname">ParsedEval</code><span class="sig-paren">(</span><em class="sig-param">idxst</em>, <em class="sig-param">start</em>, <em class="sig-param">end</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyexpander/parser.html#ParsedEval"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyexpander.parser.ParsedEval" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pyexpander.parser.ParsedItem" title="pyexpander.parser.ParsedItem"><code class="xref py py-class docutils literal notranslate"><span class="pre">pyexpander.parser.ParsedItem</span></code></a></p>
<p>class of an pyexpander expression.</p>
<p>A pyexpander expression has the form “$(expression)” e.g. “$(a+1)”. This is
different from ParsedVar where the string within the brackets is a simple
identifier.</p>
</dd></dl>

<dl class="class">
<dt id="pyexpander.parser.ParsedItem">
<em class="property">class </em><code class="sig-prename descclassname">pyexpander.parser.</code><code class="sig-name descname">ParsedItem</code><span class="sig-paren">(</span><em class="sig-param">idxst</em>, <em class="sig-param">start</em>, <em class="sig-param">end</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyexpander/parser.html#ParsedItem"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyexpander.parser.ParsedItem" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>base class of parsed items.</p>
<dl class="method">
<dt id="pyexpander.parser.ParsedItem.end">
<code class="sig-name descname">end</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyexpander/parser.html#ParsedItem.end"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyexpander.parser.ParsedItem.end" title="Permalink to this definition">¶</a></dt>
<dd><p>return the end of the ParsedItem in the source string.</p>
</dd></dl>

<dl class="method">
<dt id="pyexpander.parser.ParsedItem.positions">
<code class="sig-name descname">positions</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyexpander/parser.html#ParsedItem.positions"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyexpander.parser.ParsedItem.positions" title="Permalink to this definition">¶</a></dt>
<dd><p>return start and end of ParsedItem in the source string.</p>
</dd></dl>

<dl class="method">
<dt id="pyexpander.parser.ParsedItem.rowcol">
<code class="sig-name descname">rowcol</code><span class="sig-paren">(</span><em class="sig-param">pos=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyexpander/parser.html#ParsedItem.rowcol"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyexpander.parser.ParsedItem.rowcol" title="Permalink to this definition">¶</a></dt>
<dd><p>calculate (row,column) from a string position.</p>
</dd></dl>

<dl class="method">
<dt id="pyexpander.parser.ParsedItem.start">
<code class="sig-name descname">start</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyexpander/parser.html#ParsedItem.start"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyexpander.parser.ParsedItem.start" title="Permalink to this definition">¶</a></dt>
<dd><p>return the start of the ParsedItem in the source string.</p>
</dd></dl>

<dl class="method">
<dt id="pyexpander.parser.ParsedItem.string">
<code class="sig-name descname">string</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyexpander/parser.html#ParsedItem.string"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyexpander.parser.ParsedItem.string" title="Permalink to this definition">¶</a></dt>
<dd><p>return the string that represents the ParsedItem.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="pyexpander.parser.ParsedLiteral">
<em class="property">class </em><code class="sig-prename descclassname">pyexpander.parser.</code><code class="sig-name descname">ParsedLiteral</code><span class="sig-paren">(</span><em class="sig-param">idxst</em>, <em class="sig-param">start</em>, <em class="sig-param">end</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyexpander/parser.html#ParsedLiteral"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyexpander.parser.ParsedLiteral" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pyexpander.parser.ParsedItem" title="pyexpander.parser.ParsedItem"><code class="xref py py-class docutils literal notranslate"><span class="pre">pyexpander.parser.ParsedItem</span></code></a></p>
<p>class of a parsed literal.</p>
<p>A literal is a substring in the input that shouldn’t be modified by
pyexpander.</p>
</dd></dl>

<dl class="class">
<dt id="pyexpander.parser.ParsedPureCommand">
<em class="property">class </em><code class="sig-prename descclassname">pyexpander.parser.</code><code class="sig-name descname">ParsedPureCommand</code><span class="sig-paren">(</span><em class="sig-param">idxst</em>, <em class="sig-param">start</em>, <em class="sig-param">end</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyexpander/parser.html#ParsedPureCommand"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyexpander.parser.ParsedPureCommand" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pyexpander.parser.ParsedItem" title="pyexpander.parser.ParsedItem"><code class="xref py py-class docutils literal notranslate"><span class="pre">pyexpander.parser.ParsedItem</span></code></a></p>
<p>class of a pyexpander command without arguments.</p>
<p>A pure command has the form “$name”. Such a command has no arguments which
would be enclosed in round brackets immediately following the name.</p>
</dd></dl>

<dl class="class">
<dt id="pyexpander.parser.ParsedVar">
<em class="property">class </em><code class="sig-prename descclassname">pyexpander.parser.</code><code class="sig-name descname">ParsedVar</code><span class="sig-paren">(</span><em class="sig-param">idxst</em>, <em class="sig-param">start</em>, <em class="sig-param">end</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyexpander/parser.html#ParsedVar"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyexpander.parser.ParsedVar" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pyexpander.parser.ParsedItem" title="pyexpander.parser.ParsedItem"><code class="xref py py-class docutils literal notranslate"><span class="pre">pyexpander.parser.ParsedItem</span></code></a></p>
<p>class of a parsed variable.</p>
<p>A variable in pyexpander has the form “$(identifier)”.</p>
</dd></dl>

<dl class="function">
<dt id="pyexpander.parser.change_linesep">
<code class="sig-prename descclassname">pyexpander.parser.</code><code class="sig-name descname">change_linesep</code><span class="sig-paren">(</span><em class="sig-param">sep</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyexpander/parser.html#change_linesep"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyexpander.parser.change_linesep" title="Permalink to this definition">¶</a></dt>
<dd><p>change line separator, this is here just for tests.</p>
</dd></dl>

<dl class="function">
<dt id="pyexpander.parser.parseAll">
<code class="sig-prename descclassname">pyexpander.parser.</code><code class="sig-name descname">parseAll</code><span class="sig-paren">(</span><em class="sig-param">idxst</em>, <em class="sig-param">pos</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyexpander/parser.html#parseAll"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyexpander.parser.parseAll" title="Permalink to this definition">¶</a></dt>
<dd><p>parse everything.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">test</span><span class="p">(</span><span class="n">st</span><span class="p">,</span><span class="n">pos</span><span class="p">):</span>
<span class="gp">... </span>    <span class="n">idxst</span><span class="o">=</span> <span class="n">IndexedString</span><span class="p">(</span><span class="n">st</span><span class="p">)</span>
<span class="gp">... </span>    <span class="n">pprint</span><span class="p">(</span><span class="n">parseAll</span><span class="p">(</span><span class="n">idxst</span><span class="p">,</span><span class="n">pos</span><span class="p">))</span>
<span class="gp">...</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">test</span><span class="p">(</span><span class="s2">&quot;abc&quot;</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
<span class="go">(&#39;ParsedLiteral&#39;, (0, 2), &#39;abc&#39;)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">test</span><span class="p">(</span><span class="s2">&quot;abc$xyz&quot;</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
<span class="go">(&#39;ParsedLiteral&#39;, (0, 2), &#39;abc&#39;)</span>
<span class="go">(&#39;ParsedPureCommand&#39;, (4, 6), &#39;xyz&#39;)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">test</span><span class="p">(</span><span class="s2">&quot;abc$</span><span class="si">{xyz}</span><span class="s2">efg&quot;</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
<span class="go">(&#39;ParsedLiteral&#39;, (0, 2), &#39;abc&#39;)</span>
<span class="go">(&#39;ParsedPureCommand&#39;, (5, 7), &#39;xyz&#39;)</span>
<span class="go">(&#39;ParsedLiteral&#39;, (9, 11), &#39;efg&#39;)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">test</span><span class="p">(</span><span class="s2">&quot;abc$xyz(2*4)&quot;</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
<span class="go">(&#39;ParsedLiteral&#39;, (0, 2), &#39;abc&#39;)</span>
<span class="go">(&#39;ParsedCommand&#39;, (8, 10), &#39;2*4&#39;, &#39;xyz&#39;)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">test</span><span class="p">(</span><span class="s2">&quot;abc$(2*4)ab&quot;</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
<span class="go">(&#39;ParsedLiteral&#39;, (0, 2), &#39;abc&#39;)</span>
<span class="go">(&#39;ParsedEval&#39;, (5, 7), &#39;2*4&#39;)</span>
<span class="go">(&#39;ParsedLiteral&#39;, (9, 10), &#39;ab&#39;)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">test</span><span class="p">(</span><span class="s2">&quot;abc</span><span class="se">\\</span><span class="s2">$(2*4)ab&quot;</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
<span class="go">(&#39;ParsedLiteral&#39;, (0, 2), &#39;abc&#39;)</span>
<span class="go">(&#39;ParsedLiteral&#39;, (4, 4), &#39;$&#39;)</span>
<span class="go">(&#39;ParsedLiteral&#39;, (5, 11), &#39;(2*4)ab&#39;)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">test</span><span class="p">(</span><span class="s2">&quot;ab$func(1+2)</span><span class="se">\\\n</span><span class="s2">new line&quot;</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
<span class="go">(&#39;ParsedLiteral&#39;, (0, 1), &#39;ab&#39;)</span>
<span class="go">(&#39;ParsedCommand&#39;, (8, 10), &#39;1+2&#39;, &#39;func&#39;)</span>
<span class="go">(&#39;ParsedLiteral&#39;, (14, 21), &#39;new line&#39;)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">test</span><span class="p">(</span><span class="s2">&quot;ab$func(1+2)</span><span class="se">\n</span><span class="s2">new line&quot;</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
<span class="go">(&#39;ParsedLiteral&#39;, (0, 1), &#39;ab&#39;)</span>
<span class="go">(&#39;ParsedCommand&#39;, (8, 10), &#39;1+2&#39;, &#39;func&#39;)</span>
<span class="go">(&#39;ParsedLiteral&#39;, (12, 20), &#39;\nnew line&#39;)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">test</span><span class="p">(</span><span class="s2">&quot;ab$(xyz)(56)&quot;</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
<span class="go">(&#39;ParsedLiteral&#39;, (0, 1), &#39;ab&#39;)</span>
<span class="go">(&#39;ParsedVar&#39;, (4, 6), &#39;xyz&#39;)</span>
<span class="go">(&#39;ParsedLiteral&#39;, (8, 11), &#39;(56)&#39;)</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">test</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;&#39;&#39;</span>
<span class="gp">... </span><span class="s1">Some text with a macro: $(xy)</span>
<span class="gp">... </span><span class="s1">an escaped dollar: \$(xy)</span>
<span class="gp">... </span><span class="s1">a macro within letters: abc$</span><span class="si">{xy}</span><span class="s1">def</span>
<span class="gp">... </span><span class="s1">a pyexpander command structure:</span>
<span class="gp">... </span><span class="s1">$if(a=1)</span>
<span class="gp">... </span><span class="s1">here</span>
<span class="gp">... </span><span class="s1">$else</span>
<span class="gp">... </span><span class="s1">there</span>
<span class="gp">... </span><span class="s1">$endif</span>
<span class="gp">... </span><span class="s1">now a continued\</span>
<span class="gp">... </span><span class="s1">line</span>
<span class="gp">... </span><span class="s1">from here:$# the rest is a comment</span>
<span class="gp">... </span><span class="s1">now an escaped continued\\</span>
<span class="gp">... </span><span class="s1">line</span>
<span class="gp">... </span><span class="s1">&#39;&#39;&#39;</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
<span class="go">(&#39;ParsedLiteral&#39;, (0, 24), &#39;\nSome text with a macro: &#39;)</span>
<span class="go">(&#39;ParsedVar&#39;, (27, 28), &#39;xy&#39;)</span>
<span class="go">(&#39;ParsedLiteral&#39;, (30, 49), &#39;\nan escaped dollar: &#39;)</span>
<span class="go">(&#39;ParsedLiteral&#39;, (51, 51), &#39;$&#39;)</span>
<span class="go">(&#39;ParsedLiteral&#39;, (52, 83), &#39;(xy)\na macro within letters: abc&#39;)</span>
<span class="go">(&#39;ParsedPureCommand&#39;, (86, 87), &#39;xy&#39;)</span>
<span class="go">(&#39;ParsedLiteral&#39;, (89, 124), &#39;def\na pyexpander command structure:\n&#39;)</span>
<span class="go">(&#39;ParsedCommand&#39;, (129, 131), &#39;a=1&#39;, &#39;if&#39;)</span>
<span class="go">(&#39;ParsedLiteral&#39;, (133, 138), &#39;\nhere\n&#39;)</span>
<span class="go">(&#39;ParsedPureCommand&#39;, (140, 143), &#39;else&#39;)</span>
<span class="go">(&#39;ParsedLiteral&#39;, (144, 150), &#39;\nthere\n&#39;)</span>
<span class="go">(&#39;ParsedPureCommand&#39;, (152, 156), &#39;endif&#39;)</span>
<span class="go">(&#39;ParsedLiteral&#39;, (157, 172), &#39;\nnow a continued&#39;)</span>
<span class="go">(&#39;ParsedLiteral&#39;, (175, 189), &#39;line\nfrom here:&#39;)</span>
<span class="go">(&#39;ParsedComment&#39;, (192, 214), &#39; the rest is a comment\n&#39;)</span>
<span class="go">(&#39;ParsedLiteral&#39;, (215, 238), &#39;now an escaped continued&#39;)</span>
<span class="go">(&#39;ParsedLiteral&#39;, (239, 239), &#39;\\&#39;)</span>
<span class="go">(&#39;ParsedLiteral&#39;, (241, 246), &#39;\nline\n&#39;)</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="pyexpander.parser.parseBackslash">
<code class="sig-prename descclassname">pyexpander.parser.</code><code class="sig-name descname">parseBackslash</code><span class="sig-paren">(</span><em class="sig-param">idxst</em>, <em class="sig-param">pos</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyexpander/parser.html#parseBackslash"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyexpander.parser.parseBackslash" title="Permalink to this definition">¶</a></dt>
<dd><p>parses a backslash.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">os</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">test</span><span class="p">(</span><span class="n">st</span><span class="p">,</span><span class="n">pos</span><span class="p">,</span><span class="n">sep</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">if</span> <span class="n">sep</span><span class="p">:</span>
<span class="gp">... </span>        <span class="n">change_linesep</span><span class="p">(</span><span class="n">sep</span><span class="p">)</span>
<span class="gp">... </span>    <span class="n">idxst</span><span class="o">=</span> <span class="n">IndexedString</span><span class="p">(</span><span class="n">st</span><span class="p">)</span>
<span class="gp">... </span>    <span class="p">(</span><span class="n">p</span><span class="p">,</span><span class="n">elm</span><span class="p">)</span><span class="o">=</span> <span class="n">parseBackslash</span><span class="p">(</span><span class="n">idxst</span><span class="p">,</span><span class="n">pos</span><span class="p">)</span>
<span class="gp">... </span>    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Parsed: </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">elm</span><span class="p">)</span>
<span class="gp">... </span>    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;rest of string:</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="nb">repr</span><span class="p">(</span><span class="n">st</span><span class="p">[</span><span class="n">p</span><span class="p">:]))</span>
<span class="gp">... </span>    <span class="n">change_linesep</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">linesep</span><span class="p">)</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">test</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;\abc&quot;</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
<span class="go">Parsed: (&#39;ParsedLiteral&#39;, (0, 0), &#39;\\&#39;)</span>
<span class="go">rest of string:&#39;abc&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">test</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\\</span><span class="s2">&quot;</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
<span class="go">Parsed: (&#39;ParsedLiteral&#39;, (0, 0), &#39;\\&#39;)</span>
<span class="go">rest of string:&#39;&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">test</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\\\r</span><span class="s2">ab&quot;</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="s2">&quot;</span><span class="se">\r</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="go">Parsed: None</span>
<span class="go">rest of string:&#39;ab&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">test</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\\\r</span><span class="s2">ab&quot;</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="go">Parsed: (&#39;ParsedLiteral&#39;, (0, 0), &#39;\\&#39;)</span>
<span class="go">rest of string:&#39;\rab&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">test</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\\\r</span><span class="s2">ab&quot;</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="s2">&quot;</span><span class="se">\r\n</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="go">Parsed: (&#39;ParsedLiteral&#39;, (0, 0), &#39;\\&#39;)</span>
<span class="go">rest of string:&#39;\rab&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">test</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\\\n</span><span class="s2">ab&quot;</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="s2">&quot;</span><span class="se">\r</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="go">Parsed: (&#39;ParsedLiteral&#39;, (0, 0), &#39;\\&#39;)</span>
<span class="go">rest of string:&#39;\nab&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">test</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\\\n</span><span class="s2">ab&quot;</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="go">Parsed: None</span>
<span class="go">rest of string:&#39;ab&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">test</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\\\n</span><span class="s2">ab&quot;</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="s2">&quot;</span><span class="se">\r\n</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="go">Parsed: (&#39;ParsedLiteral&#39;, (0, 0), &#39;\\&#39;)</span>
<span class="go">rest of string:&#39;\nab&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">test</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\\\r\n</span><span class="s2">ab&quot;</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="s2">&quot;</span><span class="se">\r</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="go">Parsed: None</span>
<span class="go">rest of string:&#39;\nab&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">test</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\\\r\n</span><span class="s2">ab&quot;</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="go">Parsed: (&#39;ParsedLiteral&#39;, (0, 0), &#39;\\&#39;)</span>
<span class="go">rest of string:&#39;\r\nab&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">test</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\\\r\n</span><span class="s2">ab&quot;</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="s2">&quot;</span><span class="se">\r\n</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="go">Parsed: None</span>
<span class="go">rest of string:&#39;ab&#39;</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="pyexpander.parser.parseBracketed">
<code class="sig-prename descclassname">pyexpander.parser.</code><code class="sig-name descname">parseBracketed</code><span class="sig-paren">(</span><em class="sig-param">idxst</em>, <em class="sig-param">pos</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyexpander/parser.html#parseBracketed"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyexpander.parser.parseBracketed" title="Permalink to this definition">¶</a></dt>
<dd><p>parse an identifier in curly brackets.</p>
<p>Here are some examples:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">test</span><span class="p">(</span><span class="n">st</span><span class="p">,</span><span class="n">pos</span><span class="p">):</span>
<span class="gp">... </span>    <span class="n">idxst</span><span class="o">=</span> <span class="n">IndexedString</span><span class="p">(</span><span class="n">st</span><span class="p">)</span>
<span class="gp">... </span>    <span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">)</span><span class="o">=</span> <span class="n">parseBracketed</span><span class="p">(</span><span class="n">idxst</span><span class="p">,</span><span class="n">pos</span><span class="p">)</span>
<span class="gp">... </span>    <span class="nb">print</span><span class="p">(</span><span class="n">st</span><span class="p">[</span><span class="n">a</span><span class="p">:</span><span class="n">b</span><span class="p">])</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">test</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;</span><span class="si">{abc}</span><span class="s1">&#39;</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
<span class="go">{abc}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">test</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;</span><span class="si">{ab8c}</span><span class="s1">&#39;</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
<span class="go">{ab8c}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">test</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;</span><span class="si">{c}</span><span class="s1">&#39;</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
<span class="go">{c}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">test</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;</span><span class="si">{}</span><span class="s1">&#39;</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
<span class="gt">Traceback (most recent call last):</span>
    <span class="o">...</span>
<span class="gr">ParseException</span>: <span class="n">command enclosed in curly brackets at line 1, col 1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">test</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;{abc&#39;</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
<span class="gt">Traceback (most recent call last):</span>
    <span class="o">...</span>
<span class="gr">ParseException</span>: <span class="n">command enclosed in curly brackets at line 1, col 1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">test</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;x</span><span class="si">{ab8c}</span><span class="s1">&#39;</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
<span class="go">{ab8c}</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="pyexpander.parser.parseCode">
<code class="sig-prename descclassname">pyexpander.parser.</code><code class="sig-name descname">parseCode</code><span class="sig-paren">(</span><em class="sig-param">idxst</em>, <em class="sig-param">pos</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyexpander/parser.html#parseCode"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyexpander.parser.parseCode" title="Permalink to this definition">¶</a></dt>
<dd><p>parse python code, it MUST start with a ‘(‘.</p>
<p>Here are some examples:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">test</span><span class="p">(</span><span class="n">st</span><span class="p">,</span><span class="n">pos</span><span class="p">):</span>
<span class="gp">... </span>    <span class="n">idxst</span><span class="o">=</span> <span class="n">IndexedString</span><span class="p">(</span><span class="n">st</span><span class="p">)</span>
<span class="gp">... </span>    <span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">)</span><span class="o">=</span> <span class="n">parseCode</span><span class="p">(</span><span class="n">idxst</span><span class="p">,</span><span class="n">pos</span><span class="p">)</span>
<span class="gp">... </span>    <span class="nb">print</span><span class="p">(</span><span class="n">st</span><span class="p">[</span><span class="n">a</span><span class="p">:</span><span class="n">b</span><span class="p">])</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">test</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;(a+b)&#39;</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
<span class="go">(a+b)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">test</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;(a+(b*c))&#39;</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
<span class="go">(a+(b*c))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">test</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;(a+(b*c)+&quot;)&quot;)&#39;</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
<span class="go">(a+(b*c)+&quot;)&quot;)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">test</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;(a+(b*c)+&#39;&#39;&#39;)&#39;&#39;&#39;)&quot;</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
<span class="go">(a+(b*c)+&#39;&#39;&#39;)&#39;&#39;&#39;)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">test</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;(a+(b*c)+&#39;&#39;&#39;)&#39;&#39;&#39;+# comment )\n)&quot;</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
<span class="gt">Traceback (most recent call last):</span>
    <span class="o">...</span>
<span class="gr">ParseException</span>: <span class="n">end of bracket expression not found at line 1, col 1</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">test</span><span class="p">(</span><span class="s2">&quot;(a+(b*c)+&#39;&#39;&#39;)&#39;&#39;&#39;+# comment )</span><span class="se">\n</span><span class="s2">)&quot;</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
<span class="go">(a+(b*c)+&#39;&#39;&#39;)&#39;&#39;&#39;+# comment )</span>
<span class="go">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="pyexpander.parser.parseComment">
<code class="sig-prename descclassname">pyexpander.parser.</code><code class="sig-name descname">parseComment</code><span class="sig-paren">(</span><em class="sig-param">idxst</em>, <em class="sig-param">pos</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyexpander/parser.html#parseComment"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyexpander.parser.parseComment" title="Permalink to this definition">¶</a></dt>
<dd><p>parse a python comment.</p>
<p>Here are some examples:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">os</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">test</span><span class="p">(</span><span class="n">st</span><span class="p">,</span><span class="n">pos</span><span class="p">,</span><span class="n">sep</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">if</span> <span class="n">sep</span><span class="p">:</span>
<span class="gp">... </span>        <span class="n">change_linesep</span><span class="p">(</span><span class="n">sep</span><span class="p">)</span>
<span class="gp">... </span>    <span class="n">idxst</span><span class="o">=</span> <span class="n">IndexedString</span><span class="p">(</span><span class="n">st</span><span class="p">)</span>
<span class="gp">... </span>    <span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">)</span><span class="o">=</span> <span class="n">parseComment</span><span class="p">(</span><span class="n">idxst</span><span class="p">,</span><span class="n">pos</span><span class="p">)</span>
<span class="gp">... </span>    <span class="nb">print</span><span class="p">(</span><span class="nb">repr</span><span class="p">(</span><span class="n">st</span><span class="p">[</span><span class="n">a</span><span class="p">:</span><span class="n">b</span><span class="p">]))</span>
<span class="gp">... </span>    <span class="n">change_linesep</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">linesep</span><span class="p">)</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">test</span><span class="p">(</span><span class="s2">&quot;#abc&quot;</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
<span class="go">&#39;#abc&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">test</span><span class="p">(</span><span class="s2">&quot;#abc</span><span class="se">\n</span><span class="s2">ef&quot;</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="go">&#39;#abc\n&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">test</span><span class="p">(</span><span class="s2">&quot;#abc</span><span class="se">\r\n</span><span class="s2">ef&quot;</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="s2">&quot;</span><span class="se">\r\n</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="go">&#39;#abc\r\n&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">test</span><span class="p">(</span><span class="s2">&quot;xy#abc&quot;</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span>
<span class="go">&#39;#abc&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">test</span><span class="p">(</span><span class="s2">&quot;xy#abc</span><span class="se">\n</span><span class="s2">ef&quot;</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="go">&#39;#abc\n&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">test</span><span class="p">(</span><span class="s2">&quot;xy#abc</span><span class="se">\n</span><span class="s2">ef&quot;</span><span class="p">,</span><span class="mi">3</span><span class="p">)</span>
<span class="gt">Traceback (most recent call last):</span>
    <span class="o">...</span>
<span class="gr">ParseException</span>: <span class="n">start of comment not found at line 1, col 4</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="pyexpander.parser.parseDollar">
<code class="sig-prename descclassname">pyexpander.parser.</code><code class="sig-name descname">parseDollar</code><span class="sig-paren">(</span><em class="sig-param">idxst</em>, <em class="sig-param">pos</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyexpander/parser.html#parseDollar"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyexpander.parser.parseDollar" title="Permalink to this definition">¶</a></dt>
<dd><p>parse things that follow a dollar.</p>
<p>Here are some examples:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">test</span><span class="p">(</span><span class="n">st</span><span class="p">,</span><span class="n">pos</span><span class="p">):</span>
<span class="gp">... </span>  <span class="n">idxst</span><span class="o">=</span> <span class="n">IndexedString</span><span class="p">(</span><span class="n">st</span><span class="p">)</span>
<span class="gp">... </span>  <span class="p">(</span><span class="n">p</span><span class="p">,</span><span class="n">elm</span><span class="p">)</span><span class="o">=</span> <span class="n">parseDollar</span><span class="p">(</span><span class="n">idxst</span><span class="p">,</span><span class="n">pos</span><span class="p">)</span>
<span class="gp">... </span>  <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Parsed: </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">elm</span><span class="p">)</span>
<span class="gp">... </span>  <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;rest of string:</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">st</span><span class="p">[</span><span class="n">p</span><span class="p">:])</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">test</span><span class="p">(</span><span class="s2">&quot;$abc&quot;</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
<span class="go">Parsed: (&#39;ParsedPureCommand&#39;, (1, 3), &#39;abc&#39;)</span>
<span class="go">rest of string:</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">test</span><span class="p">(</span><span class="s2">&quot;$abc%&amp;/&quot;</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
<span class="go">Parsed: (&#39;ParsedPureCommand&#39;, (1, 3), &#39;abc&#39;)</span>
<span class="go">rest of string:%&amp;/</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">test</span><span class="p">(</span><span class="s2">&quot;$abc(2*3)&quot;</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
<span class="go">Parsed: (&#39;ParsedCommand&#39;, (5, 7), &#39;2*3&#39;, &#39;abc&#39;)</span>
<span class="go">rest of string:</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">test</span><span class="p">(</span><span class="s2">&quot; $abc(2*sin(x))&quot;</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
<span class="go">Parsed: (&#39;ParsedCommand&#39;, (6, 13), &#39;2*sin(x)&#39;, &#39;abc&#39;)</span>
<span class="go">rest of string:</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">test</span><span class="p">(</span><span class="s2">&quot; $abc(2*sin(x))bn&quot;</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
<span class="go">Parsed: (&#39;ParsedCommand&#39;, (6, 13), &#39;2*sin(x)&#39;, &#39;abc&#39;)</span>
<span class="go">rest of string:bn</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">test</span><span class="p">(</span><span class="s2">&quot; $# a comment</span><span class="se">\n</span><span class="s2">new line&quot;</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
<span class="go">Parsed: (&#39;ParsedComment&#39;, (3, 13), &#39; a comment\n&#39;)</span>
<span class="go">rest of string:new line</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">test</span><span class="p">(</span><span class="s2">&quot;$(abc)&quot;</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
<span class="go">Parsed: (&#39;ParsedVar&#39;, (2, 4), &#39;abc&#39;)</span>
<span class="go">rest of string:</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">test</span><span class="p">(</span><span class="s2">&quot;$(abc*2)&quot;</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
<span class="go">Parsed: (&#39;ParsedEval&#39;, (2, 6), &#39;abc*2&#39;)</span>
<span class="go">rest of string:</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">test</span><span class="p">(</span><span class="s2">&quot; $(2*x(y))abc&quot;</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
<span class="go">Parsed: (&#39;ParsedEval&#39;, (3, 8), &#39;2*x(y)&#39;)</span>
<span class="go">rest of string:abc</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="pyexpander.parser.parseStringLiteral">
<code class="sig-prename descclassname">pyexpander.parser.</code><code class="sig-name descname">parseStringLiteral</code><span class="sig-paren">(</span><em class="sig-param">idxst</em>, <em class="sig-param">pos</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyexpander/parser.html#parseStringLiteral"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyexpander.parser.parseStringLiteral" title="Permalink to this definition">¶</a></dt>
<dd><p>parse a python string literal.</p>
<p>returns 2 numbers, the index where the string starts and
the index of the first character <em>after</em> the string</p>
<p>Here are some examples:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">test</span><span class="p">(</span><span class="n">st</span><span class="p">,</span><span class="n">pos</span><span class="p">):</span>
<span class="gp">... </span>    <span class="n">idxst</span><span class="o">=</span> <span class="n">IndexedString</span><span class="p">(</span><span class="n">st</span><span class="p">)</span>
<span class="gp">... </span>    <span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">)</span><span class="o">=</span> <span class="n">parseStringLiteral</span><span class="p">(</span><span class="n">idxst</span><span class="p">,</span><span class="n">pos</span><span class="p">)</span>
<span class="gp">... </span>    <span class="nb">print</span><span class="p">(</span><span class="n">st</span><span class="p">[</span><span class="n">a</span><span class="p">:</span><span class="n">b</span><span class="p">])</span>
<span class="gp">...</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">test</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;&#39;&#39;&quot;abc&quot;&#39;&#39;&#39;</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
<span class="go">&quot;abc&quot;</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">test</span><span class="p">(</span><span class="s2">&quot;&#39;&#39;&#39;ab&#39;c&#39;d&#39;&#39;&#39;&quot;</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
<span class="go">&#39;&#39;&#39;ab&#39;c&#39;d&#39;&#39;&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">test</span><span class="p">(</span><span class="s2">&quot;&#39;&#39;&#39;ab&#39;cd&#39;&#39;&#39;&#39;&quot;</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
<span class="go">&#39;&#39;&#39;ab&#39;cd&#39;&#39;&#39;</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">test</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;&#39;&#39;F&quot;abc&quot;&#39;&#39;&#39;</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
<span class="go">F&quot;abc&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">test</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;&#39;&#39;xF&quot;abc&quot;&#39;&#39;&#39;</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
<span class="go">F&quot;abc&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">test</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;&#39;&#39;xFr&quot;abc&quot;&#39;&#39;&#39;</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
<span class="go">Fr&quot;abc&quot;</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">test</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;&#39;&#39;xFr&quot;ab\\&quot;c&quot;&#39;&#39;&#39;</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
<span class="go">Fr&quot;ab\\&quot;</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">test</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;&#39;&#39;xFr&quot;ab\&quot;c&quot;&#39;&#39;&#39;</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
<span class="go">Fr&quot;ab\&quot;c&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">test</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;&#39;&#39;xFr&quot;ab\&quot;c&quot;&#39;&#39;&#39;</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
<span class="gt">Traceback (most recent call last):</span>
    <span class="o">...</span>
<span class="gr">ParseException</span>: <span class="n">start of string expected at line 1, col 1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">test</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;&#39;&#39;&quot;ab&#39;&#39;&#39;</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
<span class="gt">Traceback (most recent call last):</span>
    <span class="o">...</span>
<span class="gr">ParseException</span>: <span class="n">end of string not found at line 1, col 1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">test</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;&#39;&#39;&#39;ab&#39;&quot;</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
<span class="gt">Traceback (most recent call last):</span>
    <span class="o">...</span>
<span class="gr">ParseException</span>: <span class="n">end of string not found at line 1, col 1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">test</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;&#39;&#39;&quot;ab\&quot;&#39;&#39;&#39;</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
<span class="gt">Traceback (most recent call last):</span>
    <span class="o">...</span>
<span class="gr">ParseException</span>: <span class="n">end of string not found at line 1, col 1</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="pyexpander.parser.pprint">
<code class="sig-prename descclassname">pyexpander.parser.</code><code class="sig-name descname">pprint</code><span class="sig-paren">(</span><em class="sig-param">parselist</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyexpander/parser.html#pprint"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyexpander.parser.pprint" title="Permalink to this definition">¶</a></dt>
<dd><p>pretty print a parselist.</p>
</dd></dl>

<dl class="function">
<dt id="pyexpander.parser.scanPyIdentList">
<code class="sig-prename descclassname">pyexpander.parser.</code><code class="sig-name descname">scanPyIdentList</code><span class="sig-paren">(</span><em class="sig-param">st</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyexpander/parser.html#scanPyIdentList"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyexpander.parser.scanPyIdentList" title="Permalink to this definition">¶</a></dt>
<dd><p>scan a list of python identifiers.</p>
<p>Here are some examples:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">scanPyIdentList</span><span class="p">(</span><span class="s2">&quot;a,b&quot;</span><span class="p">)</span>
<span class="go">[&#39;a&#39;, &#39;b&#39;]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">scanPyIdentList</span><span class="p">(</span><span class="s2">&quot;a,b.d, c&quot;</span><span class="p">)</span>
<span class="go">[&#39;a&#39;, &#39;b.d&#39;, &#39;c&#39;]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">scanPyIdentList</span><span class="p">(</span><span class="s2">&quot;a,b.d, c&amp;&quot;</span><span class="p">)</span>
<span class="gt">Traceback (most recent call last):</span>
    <span class="o">...</span>
<span class="gr">ParseException</span>: <span class="n">list of python identifiers expected</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="pyexpander.parser.scanPyIn">
<code class="sig-prename descclassname">pyexpander.parser.</code><code class="sig-name descname">scanPyIn</code><span class="sig-paren">(</span><em class="sig-param">st</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pyexpander/parser.html#scanPyIn"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyexpander.parser.scanPyIn" title="Permalink to this definition">¶</a></dt>
<dd><p>scan a python “in” statement.</p>
<p>Here are some examples:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">scanPyIn</span><span class="p">(</span><span class="s2">&quot; (a,b) in k.items() &quot;</span><span class="p">)</span>
<span class="go">(&#39;(a,b)&#39;, &#39;in&#39;, &#39;k.items()&#39;)</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="module-pyexpander">
<span id="module-contents"></span><h2>Module contents<a class="headerlink" href="#module-pyexpander" title="Permalink to this headline">¶</a></h2>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="license.html" class="btn btn-neutral float-right" title="pyexpander license" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="modules.html" class="btn btn-neutral float-left" title="python2" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2020, Helmholtz-Zentrum Berlin GmbH

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>