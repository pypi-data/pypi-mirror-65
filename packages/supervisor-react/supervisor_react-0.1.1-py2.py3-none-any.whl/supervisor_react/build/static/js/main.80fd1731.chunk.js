(this["webpackJsonpsupervisor-react"]=this["webpackJsonpsupervisor-react"]||[]).push([[0],{103:function(e,t,n){e.exports=n(148)},108:function(e,t,n){},110:function(e,t,n){},116:function(e,t){},118:function(e,t){},148:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),s=n(9),o=(n(108),n(20)),l=n(91),c=n(174),u=n(177),i=n(201),m=n(204),p=n(178),f=n(183),h=n(186),v=n(187),E=n(188),P=n(189),d=n(190),g=n(202),b=n(191),C=n(192),A=n(200),O=n(203),j=n(72),N=n(195),S=n(149),G=n(196),I=n(197),k=n(198),w=n(181),y=n(182),R=n(184),L=n(185),z=n(193),U=n(194),F=(n(109),n(110),n(111)),x=function e(){var t=this;Object(l.a)(this,e),this.client=void 0,this.processes=void 0,this.methodCall=function(e,n){return new Promise((function(r,a){return t.client.methodCall(e,n,(function(e,t){return e?a(e):r(t)}))}))},this.getSupervisorVersion=function(){return t.methodCall("supervisor.getSupervisorVersion",[])},this.getState=function(){return t.methodCall("supervisor.getState",[]).then((function(e){return e.statename}))},this.getAllProcessInfo=function(){return t.methodCall("supervisor.getAllProcessInfo",[]).then((function(e){var t={};return e.forEach((function(e){var n=t[e.group];void 0===n&&(n=t[e.group]={}),n[e.name]=e})),t}))},this.getProcessInfo=function(e,n){return t.methodCall("supervisor.getProcessInfo",["".concat(e,":").concat(n)])},this.startProcess=function(e,n){return t.methodCall("supervisor.startProcess",["".concat(e,":").concat(n)]).then((function(r){return t.getProcessInfo(e,n)}))},this.startProcessGroup=function(e){return t.methodCall("supervisor.startProcessGroup",[e]).then((function(n){return n.map((function(n){return t.getProcessInfo(e,n.name)}))}))},this.startAllProcesses=function(){return t.methodCall("supervisor.startAllProcesses",[]).then((function(e){return e.map((function(e){return t.getProcessInfo(e.group,e.name)}))}))},this.stopProcess=function(e,n){return t.methodCall("supervisor.stopProcess",["".concat(e,":").concat(n)]).then((function(r){return t.getProcessInfo(e,n)}))},this.stopProcessGroup=function(e){return t.methodCall("supervisor.stopProcessGroup",[e]).then((function(n){return n.map((function(n){return t.getProcessInfo(e,n.name)}))}))},this.stopAllProcesses=function(){return t.methodCall("supervisor.stopAllProcesses",[]).then((function(e){return e.map((function(e){return t.getProcessInfo(e.group,e.name)}))}))},this.restartProcess=function(e,n,r){return t.stopProcess(e,n).then(r).then((function(r){return t.startProcess(e,n)})).then(r)},this.restartProcessGroup=function(e,n){return t.stopProcessGroup(e).then((function(e){return Promise.all(e)})).then(n).then((function(n){return t.startProcessGroup(e)})).then((function(e){return Promise.all(e)})).then(n)},this.restartAllProcesses=function(e){return t.stopAllProcesses().then((function(e){return Promise.all(e)})).then(e).then((function(e){return t.startAllProcesses()})).then((function(e){return Promise.all(e)})).then(e)},this.clearProcessLogs=function(e,n){return t.methodCall("supervisor.clearProcessLogs",["".concat(e,":").concat(n)])},this.clearAllProcessLogs=function(){return t.methodCall("supervisor.clearAllProcessLogs",[])},this.client=F.createClient({host:window.location.hostname,port:window.location.port,path:"/RPC2"}),this.processes={}},B=function(e){return a.a.createElement(c.a,null,a.a.createElement(u.a,null),a.a.createElement(u.a,null,e.value.name),a.a.createElement(u.a,{className:(t=e.value.statename,"RUNNING"===t?"statusrunning":"FATAL"===t||"BACKOFF"===t?"statuserror":"statusnominal")},e.value.statename),a.a.createElement(u.a,null,e.value.description),a.a.createElement(u.a,null,a.a.createElement(i.a,{checked:"RUNNING"===e.value.statename,onChange:function(t){return e.supervisor[t.target.checked?"startProcess":"stopProcess"](e.value.group,e.value.name).then(e.setProcess)},size:"small"}),a.a.createElement(m.a,{title:"restart"},a.a.createElement("span",null,a.a.createElement(p.a,{color:"primary",onClick:function(t){return e.supervisor.restartProcess(e.value.group,e.value.name,e.setProcess)},disabled:"RUNNING"!==e.value.statename,size:"small"},a.a.createElement(w.a,null)))),a.a.createElement(m.a,{title:"Clear Logs"},a.a.createElement(p.a,{color:"primary",onClick:function(t){return e.supervisor.clearProcessLogs(e.value.group,e.value.name)},size:"small"},a.a.createElement(y.a,null)))),a.a.createElement(u.a,null,a.a.createElement(f.a,{href:"logtail/".concat(e.value.group,":").concat(e.value.name)},"stdout"),"\xa0",a.a.createElement(f.a,{href:"logtail/".concat(e.value.group,":").concat(e.value.name,"/stderr")},"stderr")));var t},V=function(e){return a.a.createElement(a.a.Fragment,null,a.a.createElement(c.a,null,a.a.createElement(u.a,null,e.value),a.a.createElement(u.a,null),a.a.createElement(u.a,null),a.a.createElement(u.a,null),a.a.createElement(u.a,null,a.a.createElement(m.a,{title:"Start Group"},a.a.createElement("span",null,a.a.createElement(p.a,{color:"primary",onClick:function(t){return e.supervisor.stopProcessGroup(e.value).then((function(e){return Promise.all(e)})).then(e.setProcess)},disabled:Object.values(e.processes).reduce((function(e,t){return e&&"RUNNING"!==t.statename}),!0),size:"small"},a.a.createElement(R.a,null)))),a.a.createElement(m.a,{title:"Stop Group"},a.a.createElement("span",null,a.a.createElement(p.a,{color:"primary",onClick:function(t){return e.supervisor.startProcessGroup(e.value).then((function(e){return Promise.all(e)})).then(e.setProcess)},disabled:Object.values(e.processes).reduce((function(e,t){return e&&"RUNNING"===t.statename}),!0),size:"small"},a.a.createElement(L.a,null))))),a.a.createElement(u.a,null)),Object.entries(e.processes).map((function(t){var n=Object(o.a)(t,2),r=n[0],s=n[1];return a.a.createElement(B,{key:r,value:s,supervisor:e.supervisor,setProcess:e.setProcess})})))},W=function(e){var t=Object(r.useState)("?"),n=Object(o.a)(t,2),s=n[0],l=n[1],c=Object(r.useState)("?"),u=Object(o.a)(c,2),i=u[0],m=u[1];return Object(r.useEffect)((function(){e.supervisor.getState().then(m),e.supervisor.getSupervisorVersion().then(l)}),[]),a.a.createElement(h.a,null,a.a.createElement(v.a,null,"Supervisor-React"),a.a.createElement(E.a,null,"With Supervisor ",s,", State: ",i))},J=function(){var e=Object(r.useState)({}),t=Object(o.a)(e,2),n=t[0],s=t[1],l=Object(r.useState)(null),i=Object(o.a)(l,2),f=i[0],h=i[1],v=Object(r.useState)(!1),E=Object(o.a)(v,2),w=E[0],y=E[1],R=new x;Object(r.useEffect)((function(){R.getAllProcessInfo().then(s)}),[]);var L=function(e){var t=Object.entries(n).reduce((function(e,t){var n=Object(o.a)(t,2),r=n[0],a=n[1];return e[r]=a,e}),{});Array.isArray(e)?e.reduce((function(e,t){return e[t.group][t.name]=t,e}),t):t[e.group][e.name]=e,s(t)},F=function(){h(null)};return a.a.createElement(a.a.Fragment,null,a.a.createElement(P.a,null),a.a.createElement(d.a,{fixed:!0},a.a.createElement(g.a,{open:w,onClose:function(){y(!1)}},a.a.createElement(W,{supervisor:R})),a.a.createElement(b.a,{position:"static"},a.a.createElement(C.a,null,a.a.createElement(p.a,{onClick:function(e){h(e.currentTarget)},color:"inherit"},a.a.createElement(z.a,null)),a.a.createElement(A.a,{open:null!==f,onClose:F,anchorEl:f},a.a.createElement(O.a,{onClick:function(e){F(),R.stopAllProcesses().then((function(e){return Promise.all(e)})).then(L)},disabled:Object.values(n).reduce((function(e,t){return e&&Object.values(t).reduce((function(e,t){return e&&"RUNNING"!==t.statename}),!0)}),!0)},"Stop all"),a.a.createElement(O.a,{onClick:function(e){F(),R.startAllProcesses().then((function(e){return Promise.all(e)})).then(L)},disabled:Object.values(n).reduce((function(e,t){return e&&Object.values(t).reduce((function(e,t){return e&&"RUNNING"===t.statename}),!0)}),!0)},"Start All"),a.a.createElement(O.a,{onClick:function(e){F(),R.restartAllProcesses(L)}},"Restart All"),a.a.createElement(O.a,{onClick:function(e){F(),R.clearAllProcessLogs()}},"Clear All"),a.a.createElement(O.a,{onClick:function(){F(),y(!0)}},"About")),a.a.createElement(j.a,{variant:"h6",style:{flexGrow:1}},"Supervisor"),a.a.createElement(m.a,{title:"Reload Supervisor"},a.a.createElement("span",null,a.a.createElement(p.a,{color:"inherit",onClick:function(e){return R.getAllProcessInfo().then(s)},size:"small"},a.a.createElement(U.a,null)))))),a.a.createElement(N.a,{component:S.a},a.a.createElement(G.a,{className:"sr-cell",size:"small"},a.a.createElement(I.a,null,a.a.createElement(c.a,null,a.a.createElement(u.a,null,"Group"),a.a.createElement(u.a,null,"Name"),a.a.createElement(u.a,null,"State"),a.a.createElement(u.a,null,"Description"),a.a.createElement(u.a,null,"Actions"),a.a.createElement(u.a,null,"Logs"))),a.a.createElement(k.a,null,Object.entries(n).map((function(e){var t=Object(o.a)(e,2),n=t[0],r=t[1];return a.a.createElement(V,{key:n,value:n,processes:r,supervisor:R,setProcess:L})})))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));Object(s.render)(a.a.createElement(r.StrictMode,null,a.a.createElement(J,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[103,1,2]]]);