(self.webpackJsonp=self.webpackJsonp||[]).push([[19],{192:function(t,e,n){"use strict";var i=n(8);function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function o(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function c(t,e){return(c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}e.a=Object(i.a)(function(t){return function(e){function n(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),o(this,s(n).apply(this,arguments))}var i,r,l;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&c(t,e)}(n,t),i=n,l=[{key:"properties",get:function(){return{hass:Object,localize:{type:Function,computed:"__computeLocalize(hass.localize)"}}}}],(r=[{key:"__computeLocalize",value:function(t){return t}}])&&a(i.prototype,r),l&&a(i,l),n}()})},229:function(t,e,n){"use strict";n.d(e,"a",function(){return i}),n.d(e,"c",function(){return r}),n.d(e,"b",function(){return a});var i=function(){try{(new Date).toLocaleDateString("i")}catch(t){return"RangeError"===t.name}return!1}(),r=function(){try{(new Date).toLocaleTimeString("i")}catch(t){return"RangeError"===t.name}return!1}(),a=function(){try{(new Date).toLocaleString("i")}catch(t){return"RangeError"===t.name}return!1}()},240:function(t,e,n){"use strict";n.d(e,"a",function(){return a}),n.d(e,"b",function(){return o});var i=n(225),r=n(229),a=r.b?function(t,e){return t.toLocaleString(e,{year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"2-digit"})}:function(t){return i.a.format(t,"".concat(i.a.masks.longDate,", ").concat(i.a.masks.shortTime))},o=r.b?function(t,e){return t.toLocaleString(e,{year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"2-digit",second:"2-digit"})}:function(t){return i.a.format(t,"".concat(i.a.masks.longDate,", ").concat(i.a.masks.mediumTime))}},256:function(t,e,n){"use strict";n.d(e,"a",function(){return a}),n.d(e,"b",function(){return o});var i=n(225),r=n(229),a=r.c?function(t,e){return t.toLocaleTimeString(e,{hour:"numeric",minute:"2-digit"})}:function(t){return i.a.format(t,"shortTime")},o=r.c?function(t,e){return t.toLocaleTimeString(e,{hour:"numeric",minute:"2-digit",second:"2-digit"})}:function(t){return i.a.format(t,"mediumTime")}},351:function(t,e,n){"use strict";n(205);var i=n(4),r=n(32),a=n(22),o=n(110),s=(n(119),n(11)),c=n(79),l=n(256);function u(t){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function h(){var t=function(t,e){e||(e=t.slice(0));return Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}(['\n      <style>\n        :host {\n          display: block;\n        }\n        .chartHeader {\n          padding: 6px 0 0 0;\n          width: 100%;\n          display: flex;\n          flex-direction: row;\n        }\n        .chartHeader > div {\n          vertical-align: top;\n          padding: 0 8px;\n        }\n        .chartHeader > div.chartTitle {\n          padding-top: 8px;\n          flex: 0 0 0;\n          max-width: 30%;\n        }\n        .chartHeader > div.chartLegend {\n          flex: 1 1;\n          min-width: 70%;\n        }\n        :root {\n          user-select: none;\n          -moz-user-select: none;\n          -webkit-user-select: none;\n          -ms-user-select: none;\n        }\n        .chartTooltip {\n          font-size: 90%;\n          opacity: 1;\n          position: absolute;\n          background: rgba(80, 80, 80, 0.9);\n          color: white;\n          border-radius: 3px;\n          pointer-events: none;\n          transform: translate(-50%, 12px);\n          z-index: 1000;\n          width: 200px;\n          transition: opacity 0.15s ease-in-out;\n        }\n        :host([rtl]) .chartTooltip {\n          direction: rtl;\n        }\n        .chartLegend ul,\n        .chartTooltip ul {\n          display: inline-block;\n          padding: 0 0px;\n          margin: 5px 0 0 0;\n          width: 100%;\n        }\n        .chartTooltip li {\n          display: block;\n          white-space: pre-line;\n        }\n        .chartTooltip .title {\n          text-align: center;\n          font-weight: 500;\n        }\n        .chartLegend li {\n          display: inline-block;\n          padding: 0 6px;\n          max-width: 49%;\n          text-overflow: ellipsis;\n          white-space: nowrap;\n          overflow: hidden;\n          box-sizing: border-box;\n        }\n        .chartLegend li:nth-child(odd):last-of-type {\n          /* Make last item take full width if it is odd-numbered. */\n          max-width: 100%;\n        }\n        .chartLegend li[data-hidden] {\n          text-decoration: line-through;\n        }\n        .chartLegend em,\n        .chartTooltip em {\n          border-radius: 5px;\n          display: inline-block;\n          height: 10px;\n          margin-right: 4px;\n          width: 10px;\n        }\n        :host([rtl]) .chartTooltip em {\n          margin-right: inherit;\n          margin-left: 4px;\n        }\n        paper-icon-button {\n          color: var(--secondary-text-color);\n        }\n      </style>\n      <template is="dom-if" if="[[unit]]">\n        <div class="chartHeader">\n          <div class="chartTitle">[[unit]]</div>\n          <div class="chartLegend">\n            <ul>\n              <template is="dom-repeat" items="[[metas]]">\n                <li on-click="_legendClick" data-hidden$="[[item.hidden]]">\n                  <em style$="background-color:[[item.bgColor]]"></em>\n                  [[item.label]]\n                </li>\n              </template>\n            </ul>\n          </div>\n        </div>\n      </template>\n      <div id="chartTarget" style="height:40px; width:100%">\n        <canvas id="chartCanvas"></canvas>\n        <div\n          class$="chartTooltip [[tooltip.yAlign]]"\n          style$="opacity:[[tooltip.opacity]]; top:[[tooltip.top]]; left:[[tooltip.left]]; padding:[[tooltip.yPadding]]px [[tooltip.xPadding]]px"\n        >\n          <div class="title">[[tooltip.title]]</div>\n          <div>\n            <ul>\n              <template is="dom-repeat" items="[[tooltip.lines]]">\n                <li>\n                  <em style$="background-color:[[item.bgColor]]"></em\n                  >[[item.text]]\n                </li>\n              </template>\n            </ul>\n          </div>\n        </div>\n      </div>\n    ']);return h=function(){return t},t}function f(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function d(t,e){return!e||"object"!==u(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function p(t,e,n){return(p="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=y(t)););return t}(t,e);if(i){var r=Object.getOwnPropertyDescriptor(i,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function y(t){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function m(t,e){return(m=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var b=null,g=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),d(this,y(e).apply(this,arguments))}var u,g,v;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&m(t,e)}(e,Object(c["b"])([o["a"]],r["a"])),u=e,v=[{key:"getColorList",value:function(t){var e=!1;t>10&&(e=!0,t=Math.ceil(t/2));for(var n=360/t,i=[],r=0;r<t;r++)i[r]=Color().hsl(n*r,80,38),e&&(i[r+t]=Color().hsl(n*r,80,62));return i}},{key:"getColorGenerator",value:function(t,e){var n=["ff0029","66a61e","377eb8","984ea3","00d2d5","ff7f00","af8d00","7f80cd","b3e900","c42e60","a65628","f781bf","8dd3c7","bebada","fb8072","80b1d3","fdb462","fccde5","bc80bd","ffed6f","c4eaff","cf8c00","1b9e77","d95f02","e7298a","e6ab02","a6761d","0097ff","00d067","f43600","4ba93b","5779bb","927acc","97ee3f","bf3947","9f5b00","f48758","8caed6","f2b94f","eff26e","e43872","d9b100","9d7a00","698cff","d9d9d9","00d27e","d06800","009f82","c49200","cbe8ff","fecddf","c27eb6","8cd2ce","c4b8d9","f883b0","a49100","f48800","27d0df","a04a9b"];function i(t){return Color("#"+n[t%n.length])}var r={},a=0;return e>0&&(a=e),t&&Object.keys(t).forEach(function(e){var n=t[e];isFinite(n)?r[e.toLowerCase()]=i(n):r[e.toLowerCase()]=Color(t[e])}),function(t,e){var n,o=e[3];if(null===o)return Color().hsl(0,40,38);if(void 0===o)return Color().hsl(120,40,38);var s=o.toLowerCase();return void 0===n&&(n=r[s]),void 0===n&&(n=i(a),a++,r[s]=n),n}}},{key:"template",get:function(){return Object(i.a)(h())}},{key:"properties",get:function(){return{data:Object,identifier:String,rendered:{type:Boolean,notify:!0,value:!1,readOnly:!0},metas:{type:Array,value:function(){return[]}},tooltip:{type:Object,value:function(){return{opacity:"0",left:"0",top:"0",xPadding:"5",yPadding:"3"}}},unit:Object,rtl:{type:Boolean,reflectToAttribute:!0}}}},{key:"observers",get:function(){return["onPropsChange(data)"]}}],(g=[{key:"connectedCallback",value:function(){var t=this;p(y(e.prototype),"connectedCallback",this).call(this),this._isAttached=!0,this.onPropsChange(),this._resizeListener=function(){t._debouncer=a.a.debounce(t._debouncer,s.d.after(10),function(){t._isAttached&&t.resizeChart()})},"function"==typeof ResizeObserver?(this.resizeObserver=new ResizeObserver(function(e){e.forEach(function(){t._resizeListener()})}),this.resizeObserver.observe(this.$.chartTarget)):this.addEventListener("iron-resize",this._resizeListener),null===b&&(b=Promise.all([n.e(21),n.e(168),n.e(94)]).then(n.bind(null,872))),b.then(function(e){t.ChartClass=e.default,t.onPropsChange()})}},{key:"disconnectedCallback",value:function(){p(y(e.prototype),"disconnectedCallback",this).call(this),this._isAttached=!1,this.resizeObserver&&this.resizeObserver.unobserve(this.$.chartTarget),this.removeEventListener("iron-resize",this._resizeListener),void 0!==this._resizeTimer&&(clearInterval(this._resizeTimer),this._resizeTimer=void 0)}},{key:"onPropsChange",value:function(){this._isAttached&&this.ChartClass&&this.data&&this.drawChart()}},{key:"_customTooltips",value:function(t){if(0!==t.opacity){t.yAlign?this.set(["tooltip","yAlign"],t.yAlign):this.set(["tooltip","yAlign"],"no-transform");var e=t.title&&t.title[0]||"";this.set(["tooltip","title"],e);var n=t.body.map(function(t){return t.lines});t.body&&this.set(["tooltip","lines"],n.map(function(e,n){var i=t.labelColors[n];return{color:i.borderColor,bgColor:i.backgroundColor,text:e.join("\n")}}));var i=this.$.chartTarget.clientWidth,r=t.caretX,a=this._chart.canvas.offsetTop+t.caretY;t.caretX+100>i?r=i-100:t.caretX<100&&(r=100),r+=this._chart.canvas.offsetLeft,this.tooltip=Object.assign({},this.tooltip,{opacity:1,left:"".concat(r,"px"),top:"".concat(a,"px")})}else this.set(["tooltip","opacity"],0)}},{key:"_legendClick",value:function(t){(t=t||window.event).stopPropagation();for(var e=t.target||t.srcElement;"LI"!==e.nodeName;)e=e.parentElement;var n=t.model.itemsIndex,i=this._chart.getDatasetMeta(n);i.hidden=null===i.hidden?!this._chart.data.datasets[n].hidden:null,this.set(["metas",n,"hidden"],this._chart.isDatasetVisible(n)?null:"hidden"),this._chart.update()}},{key:"_drawLegend",value:function(){var t=this,e=this._chart,n=this._oldIdentifier&&this.identifier===this._oldIdentifier;this._oldIdentifier=this.identifier,this.set("metas",this._chart.data.datasets.map(function(i,r){return{label:i.label,color:i.color,bgColor:i.backgroundColor,hidden:n&&r<t.metas.length?t.metas[r].hidden:!e.isDatasetVisible(r)}}));var i=!1;if(n)for(var r=0;r<this.metas.length;r++){var a=e.getDatasetMeta(r);!!a.hidden!=!!this.metas[r].hidden&&(i=!0),a.hidden=!!this.metas[r].hidden||null}i&&e.update(),this.unit=this.data.unit}},{key:"_formatTickValue",value:function(t,e,n){if(0===n.length)return t;var i=new Date(n[e].value);return Object(l.a)(i)}},{key:"drawChart",value:function(){var t=this,e=this.data.data,n=this.$.chartCanvas;if(e.datasets&&e.datasets.length||this._chart){if("timeline"!==this.data.type&&e.datasets.length>0)for(var i=e.datasets.length,r=this.constructor.getColorList(i),a=0;a<i;a++)e.datasets[a].borderColor=r[a].rgbString(),e.datasets[a].backgroundColor=r[a].alpha(.6).rgbaString();if(this._chart)this._customTooltips({opacity:0}),this._chart.data=e,this._chart.update({duration:0}),this.isTimeline?this._chart.options.scales.yAxes[0].gridLines.display=e.length>1:!0===this.data.legend&&this._drawLegend(),this.resizeChart();else{if(!e.datasets)return;this._customTooltips({opacity:0});var o=[{afterRender:function(){return t._setRendered(!0)}}],s={responsive:!0,maintainAspectRatio:!1,animation:{duration:0},hover:{animationDuration:0},responsiveAnimationDuration:0,tooltips:{enabled:!1,custom:this._customTooltips.bind(this)},legend:{display:!1},line:{spanGaps:!0},elements:{font:"12px 'Roboto', 'sans-serif'"},ticks:{fontFamily:"'Roboto', 'sans-serif'"}};(s=Chart.helpers.merge(s,this.data.options)).scales.xAxes[0].ticks.callback=this._formatTickValue,"timeline"===this.data.type?(this.set("isTimeline",!0),void 0!==this.data.colors&&(this._colorFunc=this.constructor.getColorGenerator(this.data.colors.staticColors,this.data.colors.staticColorIndex)),void 0!==this._colorFunc&&(s.elements.colorFunction=this._colorFunc),1===e.datasets.length&&(s.scales.yAxes[0].ticks?s.scales.yAxes[0].ticks.display=!1:s.scales.yAxes[0].ticks={display:!1},s.scales.yAxes[0].gridLines?s.scales.yAxes[0].gridLines.display=!1:s.scales.yAxes[0].gridLines={display:!1}),this.$.chartTarget.style.height="50px"):this.$.chartTarget.style.height="160px";var c={type:this.data.type,data:this.data.data,options:s,plugins:o};this._chart=new this.ChartClass(n,c),!0!==this.isTimeline&&!0===this.data.legend&&this._drawLegend(),this.resizeChart()}}}},{key:"resizeChart",value:function(){this._chart&&(void 0!==this._resizeTimer?(clearInterval(this._resizeTimer),this._resizeTimer=void 0,this._resizeChart()):this._resizeTimer=setInterval(this.resizeChart.bind(this),10))}},{key:"_resizeChart",value:function(){var t=this.$.chartTarget,e=this.data.data;if(0!==e.datasets.length)if(this.isTimeline){var n=this._chart.chartArea.top,i=this._chart.chartArea.bottom,r=this._chart.canvas.clientHeight;if(i>0&&(this._axisHeight=r-i+n),!this._axisHeight)return t.style.height="50px",this._chart.resize(),void this.resizeChart();if(this._axisHeight){var a=30*e.datasets.length+this._axisHeight+"px";t.style.height!==a&&(t.style.height=a),this._chart.resize()}}else this._chart.resize()}},{key:"chart",get:function(){return this._chart}}])&&f(u.prototype,g),v&&f(u,v),e}();customElements.define("ha-chart-base",g);var v=n(192),_=n(240);function w(t){return(w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function O(){var t=function(t,e){e||(e=t.slice(0));return Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}(['\n      <style>\n        :host {\n          display: block;\n          overflow: hidden;\n          height: 0;\n          transition: height 0.3s ease-in-out;\n        }\n      </style>\n      <ha-chart-base\n        id="chart"\n        data="[[chartData]]"\n        identifier="[[identifier]]"\n        rendered="{{rendered}}"\n      ></ha-chart-base>\n    ']);return O=function(){return t},t}function k(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function j(t,e){return!e||"object"!==w(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function x(t,e,n){return(x="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=C(t)););return t}(t,e);if(i){var r=Object.getOwnPropertyDescriptor(i,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function C(t){return(C=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function T(t,e){return(T=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var z=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),j(this,C(e).apply(this,arguments))}var n,a,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&T(t,e)}(e,Object(v["a"])(r["a"])),n=e,o=[{key:"template",get:function(){return Object(i.a)(O())}},{key:"properties",get:function(){return{chartData:Object,data:Object,names:Object,unit:String,identifier:String,isSingleDevice:{type:Boolean,value:!1},endTime:Object,rendered:{type:Boolean,value:!1,observer:"_onRenderedChanged"}}}},{key:"observers",get:function(){return["dataChanged(data, endTime, isSingleDevice)"]}}],(a=[{key:"connectedCallback",value:function(){x(C(e.prototype),"connectedCallback",this).call(this),this._isAttached=!0,this.drawChart()}},{key:"dataChanged",value:function(){this.drawChart()}},{key:"_onRenderedChanged",value:function(t){t&&this.animateHeight()}},{key:"animateHeight",value:function(){var t=this;requestAnimationFrame(function(){return requestAnimationFrame(function(){t.style.height=t.$.chart.scrollHeight+"px"})})}},{key:"drawChart",value:function(){var t,e=this,n=this.unit,i=this.data,r=[];if(this._isAttached&&0!==i.length){(t=this.endTime||new Date(Math.max.apply(null,i.map(function(t){return new Date(t.states[t.states.length-1].last_changed)}))))>new Date&&(t=new Date);var a=this.names||{};i.forEach(function(i){var o,c=i.domain,l=a[i.entity_id]||i.name,u=[];function h(e,n){n&&(e>t||(u.forEach(function(t,i){t.data.push({x:e,y:n[i]})}),o=n))}function f(t,e,i){var r=!1,a=!1;i&&(r="origin"),e&&(a="before"),u.push({label:t,fill:r,steppedLine:a,pointRadius:0,data:[],unitText:n})}if("thermostat"===c||"climate"===c||"water_heater"===c){var d=i.states.some(function(t){return t.attributes&&t.attributes.hvac_action}),p="climate"===c&&d?function(t){return"heating"===t.attributes.hvac_action}:function(t){return"heat"===t.state},y="climate"===c&&d?function(t){return"cooling"===t.attributes.hvac_action}:function(t){return"cool"===t.state},m=i.states.some(p),b=i.states.some(y),g=i.states.some(function(t){return t.attributes&&t.attributes.target_temp_high!==t.attributes.target_temp_low});f("".concat(e.hass.localize("ui.card.climate.current_temperature","name",l)),!0),m&&f("".concat(e.hass.localize("ui.card.climate.heating","name",l)),!0,!0),b&&f("".concat(e.hass.localize("ui.card.climate.cooling","name",l)),!0,!0),g?(f("".concat(e.hass.localize("ui.card.climate.target_temperature_mode","name",l,"mode",e.hass.localize("ui.card.climate.high"))),!0),f("".concat(e.hass.localize("ui.card.climate.target_temperature_mode","name",l,"mode",e.hass.localize("ui.card.climate.low"))),!0)):f("".concat(e.hass.localize("ui.card.climate.target_temperature_entity","name",l)),!0),i.states.forEach(function(t){if(t.attributes){var e=s(t.attributes.current_temperature),n=[e];if(m&&n.push(p(t)?e:null),b&&n.push(y(t)?e:null),g){var i=s(t.attributes.target_temp_high),r=s(t.attributes.target_temp_low);n.push(i,r),h(new Date(t.last_changed),n)}else{var a=s(t.attributes.temperature);n.push(a),h(new Date(t.last_changed),n)}}})}else{f(l,"sensor"===c);var v=null,_=null,w=null;i.states.forEach(function(t){var e=s(t.state),n=new Date(t.last_changed);if(null!==e&&null!==w){var i=n.getTime(),r=w.getTime(),a=_.getTime();h(w,[(r-a)/(i-a)*(e-v)+v]),h(new Date(r+1),[null]),h(n,[e]),_=n,v=e,w=null}else null!==e&&null===w?(h(n,[e]),_=n,v=e):null===e&&null===w&&null!==v&&(w=n)})}h(t,o),Array.prototype.push.apply(r,u)});var o={type:"line",unit:n,legend:!this.isSingleDevice,options:{scales:{xAxes:[{type:"time",ticks:{major:{fontStyle:"bold"}}}],yAxes:[{ticks:{maxTicksLimit:7}}]},tooltips:{mode:"neareach",callbacks:{title:function(t,n){var i=t[0],r=n.datasets[i.datasetIndex].data[i.index].x;return Object(_.b)(r,e.hass.language)}}},hover:{mode:"neareach"},layout:{padding:{top:5}},elements:{line:{tension:.1,pointRadius:0,borderWidth:1.5},point:{hitRadius:5}},plugins:{filler:{propagate:!0}}},data:{labels:[],datasets:r}};this.chartData=o}function s(t){var e=parseFloat(t);return isFinite(e)?e:null}}}])&&k(n.prototype,a),o&&k(n,o),e}();customElements.define("state-history-chart-line",z);var D=n(108);function S(t){return(S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function L(){var t=function(t,e){e||(e=t.slice(0));return Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}(['\n      <style>\n        :host {\n          display: block;\n          opacity: 0;\n          transition: opacity 0.3s ease-in-out;\n        }\n        :host([rendered]) {\n          opacity: 1;\n        }\n\n        ha-chart-base {\n          direction: ltr;\n        }\n      </style>\n      <ha-chart-base\n        data="[[chartData]]"\n        rendered="{{rendered}}"\n        rtl="{{rtl}}"\n      ></ha-chart-base>\n    ']);return L=function(){return t},t}function P(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function E(t,e){return!e||"object"!==S(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function A(t,e,n){return(A="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=R(t)););return t}(t,e);if(i){var r=Object.getOwnPropertyDescriptor(i,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function R(t){return(R=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function I(t,e){return(I=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var H=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),E(this,R(e).apply(this,arguments))}var n,a,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&I(t,e)}(e,Object(v["a"])(r["a"])),n=e,o=[{key:"template",get:function(){return Object(i.a)(L())}},{key:"properties",get:function(){return{hass:{type:Object},chartData:Object,data:{type:Object,observer:"dataChanged"},names:Object,noSingle:Boolean,endTime:Date,rendered:{type:Boolean,value:!1,reflectToAttribute:!0},rtl:{reflectToAttribute:!0,computed:"_computeRTL(hass)"}}}},{key:"observers",get:function(){return["dataChanged(data, endTime, localize, language)"]}}],(a=[{key:"connectedCallback",value:function(){A(R(e.prototype),"connectedCallback",this).call(this),this._isAttached=!0,this.drawChart()}},{key:"dataChanged",value:function(){this.drawChart()}},{key:"drawChart",value:function(){var t=this,e=this.data;if(this._isAttached){e||(e=[]);var n=new Date(e.reduce(function(t,e){return Math.min(t,new Date(e.data[0].last_changed))},new Date)),i=this.endTime||new Date(e.reduce(function(t,e){return Math.max(t,new Date(e.data[e.data.length-1].last_changed))},n));i>new Date&&(i=new Date);var r=[],a=[],o=this.names||{};e.forEach(function(t){var e,s=null,c=null,l=n,u=o[t.entity_id]||t.name,h=[];t.data.forEach(function(t){var n=t.state;void 0!==n&&""!==n||(n=null),new Date(t.last_changed)>i||(null!==s&&n!==s?(e=new Date(t.last_changed),h.push([l,e,c,s]),s=n,c=t.state_localize,l=e):null===s&&(s=n,c=t.state_localize,l=new Date(t.last_changed)))}),null!==s&&h.push([l,i,c,s]),a.push({data:h}),r.push(u)});var s={type:"timeline",options:{tooltips:{callbacks:{label:function(e,n){var i=n.datasets[e.datasetIndex].data[e.index],r=Object(_.b)(i[0],t.hass.language),a=Object(_.b)(i[1],t.hass.language);return[i[2],r,a]}}},scales:{xAxes:[{ticks:{major:{fontStyle:"bold"}}}],yAxes:[{afterSetDimensions:function(t){t.maxWidth=.18*t.chart.width},position:this._computeRTL?"right":"left"}]}},data:{labels:r,datasets:a},colors:{staticColors:{on:1,off:0,unavailable:"#a0a0a0",unknown:"#606060",idle:2},staticColorIndex:3}};this.chartData=s}}},{key:"_computeRTL",value:function(t){return Object(D.a)(t)}}])&&P(n.prototype,a),o&&P(n,o),e}();function $(t){return($="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function F(){var t=function(t,e){e||(e=t.slice(0));return Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}(['\n      <style>\n        :host {\n          display: block;\n          /* height of single timeline chart = 58px */\n          min-height: 58px;\n        }\n        .info {\n          text-align: center;\n          line-height: 58px;\n          color: var(--secondary-text-color);\n        }\n      </style>\n      <template\n        is="dom-if"\n        class="info"\n        if="[[_computeIsLoading(isLoadingData)]]"\n      >\n        <div class="info">\n          [[localize(\'ui.components.history_charts.loading_history\')]]\n        </div>\n      </template>\n\n      <template\n        is="dom-if"\n        class="info"\n        if="[[_computeIsEmpty(isLoadingData, historyData)]]"\n      >\n        <div class="info">\n          [[localize(\'ui.components.history_charts.no_history_found\')]]\n        </div>\n      </template>\n\n      <template is="dom-if" if="[[historyData.timeline.length]]">\n        <state-history-chart-timeline\n          hass="[[hass]]"\n          data="[[historyData.timeline]]"\n          end-time="[[_computeEndTime(endTime, upToNow, historyData)]]"\n          no-single="[[noSingle]]"\n          names="[[names]]"\n        ></state-history-chart-timeline>\n      </template>\n\n      <template is="dom-repeat" items="[[historyData.line]]">\n        <state-history-chart-line\n          hass="[[hass]]"\n          unit="[[item.unit]]"\n          data="[[item.data]]"\n          identifier="[[item.identifier]]"\n          is-single-device="[[_computeIsSingleLineChart(item.data, noSingle)]]"\n          end-time="[[_computeEndTime(endTime, upToNow, historyData)]]"\n          names="[[names]]"\n        ></state-history-chart-line>\n      </template>\n    ']);return F=function(){return t},t}function B(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function M(t,e){return!e||"object"!==$(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function N(t){return(N=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function V(t,e){return(V=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}customElements.define("state-history-chart-timeline",H);var G=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),M(this,N(e).apply(this,arguments))}var n,a,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&V(t,e)}(e,Object(v["a"])(r["a"])),n=e,o=[{key:"template",get:function(){return Object(i.a)(F())}},{key:"properties",get:function(){return{hass:Object,historyData:{type:Object,value:null},names:Object,isLoadingData:Boolean,endTime:{type:Object},upToNow:Boolean,noSingle:Boolean}}}],(a=[{key:"_computeIsSingleLineChart",value:function(t,e){return!e&&t&&1===t.length}},{key:"_computeIsEmpty",value:function(t,e){var n=!e||!e.timeline||!e.line||0===e.timeline.length&&0===e.line.length;return!t&&n}},{key:"_computeIsLoading",value:function(t){return t&&!this.historyData}},{key:"_computeEndTime",value:function(t,e){return e?new Date:t}}])&&B(n.prototype,a),o&&B(n,o),e}();customElements.define("state-history-charts",G)}}]);
//# sourceMappingURL=chunk.59d51051a2be58f702bc.js.map