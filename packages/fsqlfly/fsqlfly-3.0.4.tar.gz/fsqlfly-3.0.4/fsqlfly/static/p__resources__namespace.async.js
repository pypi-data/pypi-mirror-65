(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{RmD5:function(e,t,a){"use strict";a.r(t);a("5Dmo");var n=a("3S7+"),l=(a("Telt"),a("Tckk")),r=(a("Mwp2"),a("VXEj")),i=(a("IzEo"),a("bx4M")),c=(a("BoS7"),a("Sdc0")),s=(a("jCWc"),a("kPKH")),o=(a("14J3"),a("BMrR")),u=(a("DZo9"),a("8z0m")),m=(a("lUTK"),a("BvKs")),d=(a("qVdP"),a("jsC+")),p=(a("MXD1"),a("CFYs")),f=(a("+L6B"),a("2/Rp")),h=(a("2qtc"),a("kLXV")),E=a("p0pE"),b=a.n(E),v=a("2Taf"),y=a.n(v),g=a("vZ4D"),k=a.n(g),C=a("l4Ni"),S=a.n(C),D=a("ujKo"),w=a.n(D),x=a("MhPg"),L=a.n(x),M=(a("5NDa"),a("5rEg")),O=a("q1tI"),j=a.n(O),N=a("i8i4"),B=a("wd/R"),R=a.n(B),T=a("MuoO"),I=a("8Skl"),P=a("z7Xi"),Y=a("xvlK"),A=a("WsrF"),V=(a("XlDN"),a("WnL9")),F=a("Hx5s"),q=a("4NGg"),H=a.n(q),K=a("c+yx"),z=a("xM2q");function X(e){return function(){var t,a=w()(e);if(function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}()){var n=w()(this).constructor;t=Reflect.construct(a,arguments,n)}else t=a.apply(this,arguments);return S()(this,t)}}var W=function(e,t,a,n){var l,r=arguments.length,i=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,a,n);else for(var c=e.length-1;c>=0;c--)(l=e[c])&&(i=(r<3?l(i):r>3?l(t,a,i):l(t,a))||i);return r>3&&i&&Object.defineProperty(t,a,i),i},J=A.a.Item,Z=M.a.Search,G=M.a.TextArea,U=function(e){L()(a,e);var t=X(a);function a(){var e;return y()(this,a),(e=t.apply(this,arguments)).state={visible:!1,done:!1,current:{},search:"",fileList:[],msg:"",success:!1,submitted:!1},e.formLayout={labelCol:{span:5},wrapperCol:{span:17}},e.normFile=function(e){return Array.isArray(e)?e:e&&e.fileList},e.showModal=function(){e.setState({visible:!0,submitted:!1,current:{},fileList:[]})},e.showEditModal=function(t){e.setState({visible:!0,current:t,submitted:!1})},e.handleDone=function(){setTimeout(function(){return e.addBtn&&e.addBtn.blur()},0),e.setState({done:!1,visible:!1})},e.handleCancel=function(){setTimeout(function(){return e.addBtn&&e.addBtn.blur()},0),e.setState({visible:!1})},e.handleSubmit=function(t){t.preventDefault();var a=e.props,n=a.dispatch,l=a.form,r=e.state,i=r.current,c=r.fileList;setTimeout(function(){return e.addBtn&&e.addBtn.blur()},0),l.validateFields(function(t,a){var l;t||(e.setState({submitted:!0}),c.length>0&&(l=c[0].response.data.realPath),i&&void 0!==i.id&&(l=i.avatar),n({type:"namespace/submit",payload:b()({},i||{},a,{avatar:l}),callback:function(t){e.setState({done:!0,success:t.success,msg:t.msg})}}))})},e.deleteItem=function(t){(0,e.props.dispatch)({type:"namespace/submit",payload:{id:t}})},e}return k()(a,[{key:"componentDidMount",value:function(){(0,this.props.dispatch)({type:"namespace/fetch"})}},{key:"render",value:function(){var e,t=this,a=this.props.loading,E=this.props.listBasicList,b=this.props.form.getFieldDecorator,v=this.state,y=v.visible,g=v.done,k=v.current,C=void 0===k?{}:k,S=v.search,D=v.fileList,w=v.success,x=v.msg,L=v.submitted,O=g?{footer:null,onCancel:this.handleDone}:{okText:"保存",onOk:this.handleSubmit,onCancel:this.handleCancel,footer:[j.a.createElement(f.a,{key:"back",onClick:this.handleCancel},"取消"),j.a.createElement(f.a,{key:"submit",type:"primary",loading:L,onClick:this.handleSubmit},"保存")]},B=j.a.createElement("div",{className:H.a.extraContent},j.a.createElement(Z,{defaultValue:S,className:H.a.extraContentSearch,placeholder:"请输入",onSearch:function(e){return t.setState({search:e})}})),T=function(e){var t=e.data,a=(t.name,t.info,t.avatar,t.isAvailable),n=t.isPublish,l=t.createAt,r=t.updateAt;return j.a.createElement("div",{className:H.a.listContent},j.a.createElement("div",{className:H.a.listContentItem},j.a.createElement("span",null,"创建时间"),j.a.createElement("p",null,R()(l).format("YYYY-MM-DD HH:mm"))),j.a.createElement("div",{className:H.a.listContentItem},j.a.createElement("span",null,"修改时间"),j.a.createElement("p",null,R()(r).format("YYYY-MM-DD HH:mm"))),j.a.createElement("div",{className:H.a.listContentItem},j.a.createElement(p.a,{type:"circle",percent:100,status:a?n?"success":"normal":"exception",strokeWidth:1,width:50,style:{width:180}})))},q=function(e){var a=e.item;return j.a.createElement(d.a,{overlay:j.a.createElement(m.a,{onClick:function(e){return function(e,a){"edit"===e?t.showEditModal(a):"delete"===e&&h.a.confirm({title:"删除任务",content:"确定删除该任务吗？",okText:"确认",cancelText:"取消",onOk:function(){return t.deleteItem(a.id?a.id:0)}})}(e.key,a)}},j.a.createElement(m.a.Item,{key:"delete"},"删除"))},j.a.createElement("a",null,"更多 ",j.a.createElement(I.a,null)))};return j.a.createElement(j.a.Fragment,null,j.a.createElement(F.b,null,j.a.createElement("div",{className:H.a.standardList},j.a.createElement(i.a,{className:H.a.listCard,bordered:!1,title:"命名空间列表",style:{marginTop:24},bodyStyle:{padding:"0 32px 40px 32px"},extra:B},j.a.createElement(f.a,{type:"dashed",style:{width:"100%",marginBottom:8},icon:j.a.createElement(Y.a,null),onClick:this.showModal,ref:function(e){t.addBtn=Object(N.findDOMNode)(e)}},"添加"),j.a.createElement(r.a,{size:"large",rowKey:"id",loading:a,dataSource:E.filter(function(e){return e.name.indexOf(t.state.search)>=0}),renderItem:function(e){return j.a.createElement(r.a.Item,{actions:[j.a.createElement("a",{key:"edit",onClick:function(a){a.preventDefault(),t.showEditModal(e)}},"编辑"),j.a.createElement(q,{key:"more",item:e})]},j.a.createElement(r.a.Item.Meta,{avatar:j.a.createElement(l.a,{src:e.avatar,shape:"square",size:"large"},Object(K.c)(e.avatar,e.name)),title:j.a.createElement(n.a,{title:e.name},j.a.createElement("a",{href:"#"},Object(K.a)(e.name))),description:j.a.createElement(n.a,{title:e.info,placement:"right"},j.a.createElement("span",null,Object(K.a)(e.info)))}),j.a.createElement(T,{data:e}))}})))),j.a.createElement(h.a,Object.assign({title:g?null:"".concat(void 0!==C.id?"编辑":"新增"),className:H.a.standardListForm,width:1080,bodyStyle:g?{padding:"72px 0"}:{padding:"28px 0 0"},destroyOnClose:!0,visible:y},O),(e=void 0===C.name,g?j.a.createElement(V.a,{type:w?"success":"error",title:"操作 ".concat(w?"成功":"失败"),description:w?"":x,actions:j.a.createElement(f.a,{type:"primary",onClick:t.handleDone},"知道了"),className:H.a.formResult}):j.a.createElement(A.a,{onSubmit:t.handleSubmit},j.a.createElement(J,Object.assign({label:"名称"},t.formLayout),b("name",{rules:z.a,initialValue:C.name})(j.a.createElement(M.a,{placeholder:"请输入"}))),j.a.createElement(J,Object.assign({label:"介绍"},t.formLayout),b("info",{rules:[{required:!1,message:"请输入项目介绍"}],initialValue:C.info})(j.a.createElement(G,{placeholder:"请输入"}))),e&&j.a.createElement(J,Object.assign({label:"背景图"},t.formLayout),j.a.createElement(u.a,{name:"logo",action:"/api/upload",listType:"picture-card",fileList:D,onChange:function(e){return t.setState({fileList:e.fileList})}},1===D.length?null:j.a.createElement(f.a,null,j.a.createElement(P.a,null)," 点击上传")),","),j.a.createElement(J,Object.assign({label:"其他"},t.formLayout),j.a.createElement(o.a,{gutter:16},j.a.createElement(s.a,{span:3},b("isAvailable",{initialValue:C.isAvailable,valuePropName:"checked"})(j.a.createElement(c.a,{checkedChildren:"启用",unCheckedChildren:"禁止"}))),j.a.createElement(s.a,{span:3},b("isPublish",{initialValue:C.isPublish,valuePropName:"checked"})(j.a.createElement(c.a,{checkedChildren:"发布",unCheckedChildren:"开发"})))))))))}}]),a}(O.Component);U=W([Object(T.connect)(function(e){var t=e.namespace,a=e.loading;return{listBasicList:t.list,loading:a.models.namespace}})],U),t.default=A.a.create()(U)}}]);